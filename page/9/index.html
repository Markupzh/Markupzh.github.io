<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/M_32px.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/M_16px.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":7,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="半吊子民工 英特纳雄耐尔就一定要实现">
<meta property="og:type" content="website">
<meta property="og:title" content="Mark blog">
<meta property="og:url" content="http://yoursite.com/page/9/index.html">
<meta property="og:site_name" content="Mark blog">
<meta property="og:description" content="半吊子民工 英特纳雄耐尔就一定要实现">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Mark">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/9/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Mark blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Mark blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">知行合一 划水归档</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Linux-shell%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mark_avatar.png">
      <meta itemprop="name" content="Mark">
      <meta itemprop="description" content="半吊子民工 英特纳雄耐尔就一定要实现">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mark blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Linux-shell%E5%9F%BA%E7%A1%80%E9%83%A8%E5%88%86/" class="post-title-link" itemprop="url">Linux shell基础部分</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-08-19 20:41:26" itemprop="dateCreated datePublished" datetime="2015-08-19T20:41:26+08:00">2015-08-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-01-02 23:38:13" itemprop="dateModified" datetime="2019-01-02T23:38:13+08:00">2019-01-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E6%B5%B7%E6%8B%BE%E8%B4%9D/" itemprop="url" rel="index"><span itemprop="name">学海拾贝</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="编程基础"><a href="#编程基础" class="headerlink" title="编程基础"></a>编程基础</h4><p>程序:指令+数据 </p>
<p>程序编程风格: </p>
<p>​    过程式:以指令为中心,数据服务于指令 </p>
<p>​    对象式:以数据为中心,指令服务于数据 </p>
<p>shell程序:提供了编程能力,解释执行 </p>
<h4 id="程序的执行方式"><a href="#程序的执行方式" class="headerlink" title="程序的执行方式"></a>程序的执行方式</h4><p>编程逻辑处理方式: </p>
<p>​    顺序执行 </p>
<p>​    循环执行 </p>
<p>​    选择执行 </p>
<p>shell编程:过程式、解释执行 </p>
<p>​    编程语言的基本结构: </p>
<p>​        各种系统命令的组合 </p>
<p>​        数据存储:变量、数组 </p>
<p>​        表达式: a + b </p>
<p>​        语句:if  </p>
<h4 id="shell脚本基础"><a href="#shell脚本基础" class="headerlink" title="shell脚本基础"></a>shell脚本基础</h4><p>shell脚本: </p>
<p>​    包含一些命令或声明,并符合一定格式的文本文件 </p>
<p>格式要求:首行shebang机制 </p>
<p>​    #!/bin/bash </p>
<p>​    #!/usr/bin/python </p>
<p>​    #!/usr/bin/perl </p>
<p>shell脚本的用途有: </p>
<p>​     自动化常用命令 </p>
<p>​     执行系统管理和故障排除 </p>
<p>​     创建简单的应用程序 </p>
<p>​     处理文本或文件 </p>
<h4 id="创建shell脚本"><a href="#创建shell脚本" class="headerlink" title="创建shell脚本"></a>创建shell脚本</h4><p>第一步:使用文本编辑器来创建文本文件 </p>
<p>​    第一行必须包括shell声明序列:#! </p>
<p>​        #!/bin/bash </p>
<p>​    添加注释 </p>
<p>​        注释以#开头 </p>
<p>​    第二步:运行脚本 </p>
<p>​        给予执行权限,在命令行上指定脚本的绝对或相对路径 </p>
<p>​        直接运行解释器,将脚本作为解释器程序的参数运行 </p>
<h4 id="脚本规范"><a href="#脚本规范" class="headerlink" title="脚本规范"></a>脚本规范</h4><p>脚本代码开头约定 </p>
<p>​    1、第一行一般为调用使用的语言 </p>
<p>​    2、程序名,避免更改文件名为无法找到正确的文件 </p>
<p>​    3、版本号 </p>
<p>​    4、更改后的时间 </p>
<p>​    5、作者相关信息 </p>
<p>​    6、该程序的作用,及注意事项 </p>
<p>​    7、最后是各版本的更新简要说明</p>
<h4 id="脚本的基本结构"><a href="#脚本的基本结构" class="headerlink" title="脚本的基本结构"></a>脚本的基本结构</h4><p> #!SHEBANG </p>
<p>CONFIGURATION_VARIABLES </p>
<p>FUNCTION_DEFINITIONS </p>
<p>MAIN_CODE </p>
<h4 id="脚本调试"><a href="#脚本调试" class="headerlink" title="脚本调试"></a>脚本调试</h4><p>检测脚本中的语法错误 </p>
<p>​    bash -n /path/to/some_script </p>
<p>调试执行 </p>
<p>​    bash -x /path/to/some_script </p>
<h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><p>变量:命名的内存空间 </p>
<p>​    数据存储方式: </p>
<p>​        字符: </p>
<p>​        数值:整型,浮点型 </p>
<p>变量:变量类型 </p>
<p>​    作用: </p>
<p>​        1、数据存储格式 </p>
<p>​        2、参与的运算 </p>
<p>​        3、表示的数据范围 </p>
<p>​    类型: </p>
<p>​        字符 </p>
<p>​        数值:整型、浮点型 </p>
<p>强类型:变量不经过强制转换,它永远是这个数据类型,不允许隐式的类型转 换.一般定义变量时必须指定类型、参与运算必须符合类型要求;调用未声明 变量会产生错误 </p>
<p>​    如 java,c# </p>
<p>弱类型:语言的运行时会隐式做数据类型转换.无须指定类型,默认均为字符 型;参与运算会自动进行隐式类型转换;变量无须事先定义可直接调用 </p>
<p>​    如:bash 不支持浮点数,php </p>
<p>变量命名法则: </p>
<p>​    1、不能使程序中的保留字:例如if, for </p>
<p>​    2、只能使用数字、字母及下划线,且不能以数字开头 </p>
<p>​    3、见名知义 </p>
<p>​    4、统一命名规则:驼峰命名法 </p>
<h4 id="bash中变量的种类"><a href="#bash中变量的种类" class="headerlink" title="bash中变量的种类"></a>bash中变量的种类</h4><p>根据变量的生效范围等标准划分下面变量类型: </p>
<p>​    局部变量:生效范围为当前shell进程;对当前shell之外的其它shell进程,包括 当前shell的子shell进程均无效 </p>
<p>​    环境(全局)变量:生效范围为当前shell进程及其子进程 </p>
<p>​    本地变量:生效范围为当前shell进程中某代码片断,通常指函数 </p>
<p>​    位置变量:$1, $2, …来表示,用于让脚本在脚本代码中调用通过命令行传递给它 的参数 </p>
<p>​    特殊变量:$?, $0, $*, $@, $#,$$ </p>
<h4 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h4><p>变量赋值:name=‘value’ </p>
<p>可以使用引用value: </p>
<p>​    (1) 可以是直接字串; name=“root” </p>
<p>​    (2) 变量引用:name=”$USER” </p>
<p>​    (3) 命令引用:name=`COMMAND` name=$(COMMAND) </p>
<p>变量引用:${name} $name</p>
<p>​     &quot;“:弱引用,其中的变量引用会被替换为变量值</p>
<p>​     &#39;‘:强引用,其中的变量引用不会被替换为变量值,而保持原字符串 </p>
<p>显示已定义的所有变量:set </p>
<p>删除变量:unset name </p>
<h4 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h4><p>变量声明、赋值: </p>
<p>​    export name=VALUE </p>
<p>​    declare -x name=VALUE </p>
<p>变量引用:$name, ${name} </p>
<p>显示所有环境变量: </p>
<p>​    env </p>
<p>​    printenv </p>
<p>​    export </p>
<p>​    declare -x </p>
<p>删除变量: </p>
<p>​    unset name </p>
<p>bash内建的环境变量: </p>
<p>​    PATH </p>
<p>​    SHELL </p>
<p>​    USER </p>
<p>​    UID </p>
<p>​    HOME </p>
<p>​    PWD </p>
<p>​    SHLVL </p>
<p>​    LANG </p>
<p>​     MAIL </p>
<p>​    HOSTNAME </p>
<p>​    HISTSIZE </p>
<h4 id="只读和位置变量"><a href="#只读和位置变量" class="headerlink" title="只读和位置变量"></a>只读和位置变量</h4><p>只读变量:只能声明,但不能修改和删除 </p>
<p>​     声明只读变量: </p>
<p>​        readonly name </p>
<p>​        declare -r name </p>
<p>​     查看只读变量: </p>
<p>​        readonly –p </p>
<p> 位置变量:在脚本代码中调用通过命令行传递给脚本的参数 </p>
<p>​    $1, $2, …:对应第1、第2等参数,shift [n]换位置 </p>
<p>​    $0: 命令本身 </p>
<p>​    $*: 传递给脚本的所有参数,全部参数合为一个字符串 </p>
<p>​    $@: 传递给脚本的所有参数,每个参数为独立字符串 </p>
<p>​    $#: 传递给脚本的参数的个数 </p>
<p>​        $@ $* 只在被双引号包起来的时候才会有差异 </p>
<p>​    set – 清空所有位置变量 </p>
<h4 id="退出状态"><a href="#退出状态" class="headerlink" title="退出状态"></a>退出状态</h4><p>进程使用退出状态来报告成功或失败 </p>
<p>​    • 0 代表成功,1－255代表失败 </p>
<p>​    • $? 变量保存最近的命令退出状态 </p>
<p>例如: </p>
<p>​    ping -c1 -W1 hostdown &amp;&gt; /dev/null </p>
<p>​    echo $? </p>
<h4 id="退出状态码"><a href="#退出状态码" class="headerlink" title="退出状态码"></a>退出状态码</h4><p>bash自定义退出状态码 </p>
<p>​    exit [n]:自定义退出状态码 </p>
<p>注意:脚本中一旦遇到exit命令,脚本会立即终止;终止退出状态取决于exit命 令后面的数字                                                         注意:如果未给脚本指定退出状态码,整个脚本的退出状态码取决于脚本中执行 的最后一条命令的状态码 </p>
<h4 id="算数运算"><a href="#算数运算" class="headerlink" title="算数运算"></a>算数运算</h4><p>bash中的算术运算:help let </p>
<p>​    +, -, *, /, %取模(取余), **(乘方)</p>
<p>​    实现算术运算: </p>
<p>​    (1) let var=算术表达式 </p>
<p>​    (2) var=$[算术表达式] </p>
<p>​    (3) var=$((算术表达式)) </p>
<p>​    (4) var=$(expr arg1 arg2 arg3 …) </p>
<p>​    (5) declare –i var = 数值 </p>
<p>​    (6) echo ‘算术表达式’ | bc </p>
<p>乘法符号有些场景中需要转义,如* </p>
<p>bash有内建的随机数生成器:$RANDOM(0-32767) </p>
<p>​    echo $[$RANDOM%50] :0-49之间随机数 </p>
<h4 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h4><p>增强型赋值: </p>
<p>​    +=, -=, *=, /=, %= </p>
<p>let varOPERvalue </p>
<p>​    例如:let count+=3 自加3后自赋值 </p>
<p>自增,自减: </p>
<p>​    let var+=1 </p>
<p>​    let var++ let </p>
<p>​    var-=1 </p>
<p>​    let var– </p>
<h4 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h4><p>true, false </p>
<p>​    1, 0 </p>
<p>与(and): </p>
<p>​    1 与 1 = 1 </p>
<p>​    1 与 0 = 0 </p>
<p>​    0 与 1 = 0 </p>
<p>​    0 与 0 = 0 </p>
<p>或(or): </p>
<p>​    1 或 1 = 1 </p>
<p>​    1 或 0 = 1 </p>
<p>​    0 或 1 = 1 </p>
<p>​    0 或 0 = 0 </p>
<p>非(not):！ </p>
<p>​    ! 1 = 0 </p>
<p>​    ! 0 = 1 </p>
<p>短路运算 </p>
<p>​    短路与 </p>
<p>​    第一个为0,结果必定为0 </p>
<p>​    第一个为1,第二个必须要参与运算 </p>
<p>短路或 </p>
<p>​    第一个为1,结果必定为1 </p>
<p>​    第一个为0,第二个必须要参与运算 </p>
<p>异或:</p>
<p>​    ^ 异或的两个值,相同为假,不同为真 </p>
<h4 id="条件测试"><a href="#条件测试" class="headerlink" title="条件测试"></a>条件测试</h4><p>判断某需求是否满足,需要由测试机制来实现 </p>
<p>专用的测试表达式需要由测试命令辅助完成测试过程 </p>
<p>评估布尔声明,以便用在条件性执行中 </p>
<p>​    • 若真,则返回0 </p>
<p>​    • 若假,则返回1 </p>
<p>测试命令: </p>
<p>​    • test EXPRESSION </p>
<p>​    • [ EXPRESSION ] </p>
<p>​    • [[ EXPRESSION ]] </p>
<p>​    注意:EXPRESSION前后必须有空白字符 </p>
<h4 id="条件性的执行操作符"><a href="#条件性的执行操作符" class="headerlink" title="条件性的执行操作符"></a>条件性的执行操作符</h4><p>根据退出状态而定,命令可以有条件地运行 </p>
<p>​    • &amp;&amp; 代表条件性的AND THEN </p>
<p>​    • || 代表条件性的OR ELSE </p>
<p>例如:</p>
<p>grep -q no_such_user /etc/passwd \ </p>
<p>|| echo &#39;No such user&#39; </p>
<p>No such user </p>
<p>ping -c1 -W2 station1 &amp;&gt; /dev/null \ </p>
<p>&gt; &amp;&amp; echo “station1 is up&quot; \ </p>
<p>&gt; || (echo ‘station1 is unreachable’; exit 1) </p>
<p>station1 is up </p>
<h4 id="test命令"><a href="#test命令" class="headerlink" title="test命令"></a>test命令</h4><p>长格式的例子: </p>
<p>​    test “$A” = “$B” &amp;&amp; echo “Strings are equal” </p>
<p>​    test “$A”-eq “$B” &amp;&amp; echo “Integers are equal” </p>
<p> 简写格式的例子: </p>
<p>​    [ “$A” = “$B” ] &amp;&amp; echo “Strings are equal” </p>
<p>​    [ “$A” -eq “$B” ] &amp;&amp; echo “Integers are equal” </p>
<h4 id="bash的数值测试"><a href="#bash的数值测试" class="headerlink" title="bash的数值测试"></a>bash的数值测试</h4><p>-v VAR </p>
<p>​    变量VAR是否设置 </p>
<p>数值测试: </p>
<p>​    -gt 是否大于 </p>
<p>​    -ge 是否大于等于 </p>
<p>​    -eq 是否等于 </p>
<p>​    -ne 是否不等于 </p>
<p>​    -lt 是否小于 </p>
<p>​    -le 是否小于等于 </p>
<h4 id="bash-的字符串测试"><a href="#bash-的字符串测试" class="headerlink" title="bash 的字符串测试"></a>bash 的字符串测试</h4><p>字符串测试: </p>
<p>​    = 是否等于 </p>
<p>​    &gt; ascii码是否大于ascii码 </p>
<p>​    &lt; 是否小于 </p>
<p>​    != 是否不等于 </p>
<p>​    =~ 左侧字符串是否能够被右侧的PATTERN所匹配,注意: 此表达式一般用于[[ ]]中;扩展的正则表达式 </p>
<p>​    -z “STRING“ 字符串是否为空,空为真,不空为假 </p>
<p>​    -n “STRING“ 字符串是否不空,不空为真,空为假 </p>
<p> 注意:用于字符串比较时的用到的操作数都应该使用引号 </p>
<h4 id="bash的文件测试"><a href="#bash的文件测试" class="headerlink" title="bash的文件测试"></a>bash的文件测试</h4><p>存在性测试 </p>
<p>​    -a FILE:同-e </p>
<p>​    -e FILE: 文件存在性测试,存在为真,否则为假 </p>
<p>存在性及类别测试 </p>
<p>​    -b FILE:是否存在且为块设备文件 </p>
<p>​    -c FILE:是否存在且为字符设备文件 </p>
<p>​    -d FILE:是否存在且为目录文件 </p>
<p>​    -f FILE:是否存在且为普通文件 </p>
<p>​    -h FILE 或 -L FILE:存在且为符号链接文件 </p>
<p>​    -p FILE:是否存在且为命名管道文件 </p>
<p>​    -S FILE:是否存在且为套接字文件</p>
<h4 id="bash的文件权限测试"><a href="#bash的文件权限测试" class="headerlink" title="bash的文件权限测试"></a>bash的文件权限测试</h4><p>文件权限测试: </p>
<p>​    -r FILE:是否存在且可读 </p>
<p>​    -w FILE: 是否存在且可写 </p>
<p>​    -x FILE: 是否存在且可执行 </p>
<p>文件特殊权限测试: </p>
<p>​    -u FILE:是否存在且拥有suid权限 </p>
<p>​    -g FILE:是否存在且拥有sgid权限 </p>
<p>​    -k FILE:是否存在且拥有sticky权限 </p>
<h4 id="bash的文件属性测试"><a href="#bash的文件属性测试" class="headerlink" title="bash的文件属性测试"></a>bash的文件属性测试</h4><p>文件大小测试: </p>
<p>​    -s FILE: 是否存在且非空 </p>
<p>文件是否打开: </p>
<p>​    -t fd: fd 文件描述符是否在某终端已经打开 </p>
<p>​    -N FILE:文件自从上一次被读取之后是否被修改过 </p>
<p>​    -O FILE:当前有效用户是否为文件属主 </p>
<p>​    -G FILE:当前有效用户是否为文件属组</p>
<p>双目测试: </p>
<p>​    FILE1 -ef FILE2: FILE1是否是FILE2的硬链接 </p>
<p>​    FILE1 -nt FILE2: FILE1是否新于FILE2(mtime) </p>
<p>​    FILE1 -ot FILE2: FILE1是否旧于FILE2 </p>
<h4 id="bash的组合测试条件"><a href="#bash的组合测试条件" class="headerlink" title="bash的组合测试条件"></a>bash的组合测试条件</h4><p>第一种方式: </p>
<p>​    COMMAND1 &amp;&amp; COMMAND2 并且 </p>
<p>​    COMMAND1 || COMMAND2 或者 </p>
<p>​    ! COMMAND 非 </p>
<p>​    如:[[ -r FILE ]] &amp;&amp; [[ -w FILE ]] </p>
<p>第二种方式: </p>
<p>​    EXPRESSION1 -a EXPRESSION2 并且 </p>
<p>​    EXPRESSION1 -o EXPRESSION2 或者 </p>
<p>​    ! EXPRESSION </p>
<p>​    必须使用测试命令进行 </p>
<h4 id="使用read命令来接受输入"><a href="#使用read命令来接受输入" class="headerlink" title="使用read命令来接受输入"></a>使用read命令来接受输入</h4><p>使用read来把输入值分配给一个或多个shell变量 </p>
<p>​    -p 指定要显示的提示 </p>
<p>​    -s 静默输入,一般用于密码 </p>
<p>​    -n N 指定输入的字符长度N </p>
<p>​    -d ‘字符’ 输入结束符 </p>
<p>​    -t N TIMEOUT为N秒 </p>
<p>​    read 从标准输入中读取值,给每个单词分配一个变量 </p>
<p>​    所有剩余单词都被分配给最后一个变量 </p>
<p>​    read -p “Enter a filename: “ FILE </p>
<h4 id="bash展开命令行的顺序"><a href="#bash展开命令行的顺序" class="headerlink" title="bash展开命令行的顺序"></a>bash展开命令行的顺序</h4><p>把命令行分成单个命令词 </p>
<p>展开别名 </p>
<p>展开大括号的声明({}) </p>
<p>展开波浪符声明(~) </p>
<p>命令替换$() 和 (``) </p>
<p>再次把命令行分成命令词 </p>
<p>展开文件通配(* 、?、[abc]等等) </p>
<p>准备I/0重导向(&lt;、&gt;) </p>
<p>运行命令 </p>
<h4 id="防止扩展"><a href="#防止扩展" class="headerlink" title="防止扩展"></a>防止扩展</h4><p>反斜线()会使随后的字符按原意解释 </p>
<p>​    $ echo Your cost: \$5.00 </p>
<p>​    Your cost: $5.00 </p>
<p>加引号来防止扩展 </p>
<p>​    • 单引号(’)防止所有扩展 </p>
<p>​    • 双引号(”)也防止所有扩展,但是以下情况例外: </p>
<p>​        $(美元符号) － 变量扩展 </p>
<p>​        `(反引号) － 命令替换 </p>
<p>​        (反斜线) － 禁止单个字符扩展 </p>
<p>​        !(叹号) － 历史命令替换 </p>
<h4 id="bash的配置文件"><a href="#bash的配置文件" class="headerlink" title="bash的配置文件"></a>bash的配置文件</h4><p>按生效范围划分,存在两类: </p>
<p>全局配置: </p>
<p>​    /etc/profile </p>
<p>​    /etc/profile.d/*.sh </p>
<p>​    /etc/bashrc </p>
<p>个人配置: </p>
<p>​    ~/.bash_profile </p>
<p>​    ~/.bashrc </p>
<h4 id="Profile类"><a href="#Profile类" class="headerlink" title="Profile类"></a>Profile类</h4><p>按功能划分,存在两类: </p>
<p>​    profile类和bashrc类 </p>
<p>profile类:为交互式登录的shell提供配置 </p>
<p>​    全局:/etc/profile, /etc/profile.d/*.sh </p>
<p>​    个人:~/.bash_profile </p>
<p>​    功用: </p>
<p>​    (1) 用于定义环境变量 </p>
<p>​    (2) 运行命令或脚本 </p>
<h4 id="bashrc类"><a href="#bashrc类" class="headerlink" title="bashrc类"></a>bashrc类</h4><p>bashrc类:为非交互式和交互式登录的shell提供配置 </p>
<p>​    全局:/etc/bashrc </p>
<p>​    个人:~/.bashrc </p>
<p>​    功用: </p>
<p>​    (1) 定义命令别名和函数 </p>
<p>​    (2) 定义本地变量 </p>
<h4 id="编辑配置文件生效"><a href="#编辑配置文件生效" class="headerlink" title="编辑配置文件生效"></a>编辑配置文件生效</h4><p>修改profile和bashrc文件后需生效 </p>
<p>​    两种方法: </p>
<p>​    1重新启动shell进程 </p>
<p>​    2 . 或source </p>
<p>​    例: </p>
<p>​    . ~/.bashrc </p>
<h4 id="bash退出任务"><a href="#bash退出任务" class="headerlink" title="bash退出任务"></a>bash退出任务</h4><p>保存在~/.bash_logout文件中(用户) </p>
<p>在退出登录shell时运行 </p>
<p>用于 </p>
<p>​    • 创建自动备份 </p>
<p>​    • 清除临时文件 </p>
<h4 id="变量-1"><a href="#变量-1" class="headerlink" title="$-变量"></a>$-变量</h4><p>h:hashall,打开这个选项后,Shell 会将命令所在的路径hash下来,避免每次 都要查询.通过set +h将h选项关闭 </p>
<p>i:interactive-comments,包含这个选项说明当前的 shell 是一个交互式的 shell.所谓的交互式shell,在脚本中,i选项是关闭的. </p>
<p>m:monitor,打开监控模式,就可以通过Job control来控制进程的停止、继 续,后台或者前台执行等. </p>
<p>B:braceexpand,大括号扩展 </p>
<p>H:history,H选项打开,可以展开历史列表中的命令,可以通过!感叹号来完 成,例如“!!”返回上最近的一个历史命令,“!n”返回第 n 个历史命令 </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Linux-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7-%E4%BA%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mark_avatar.png">
      <meta itemprop="name" content="Mark">
      <meta itemprop="description" content="半吊子民工 英特纳雄耐尔就一定要实现">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mark blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Linux-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7-%E4%BA%8C/" class="post-title-link" itemprop="url">Linux 文本处理工具(二)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-08-15 20:19:02" itemprop="dateCreated datePublished" datetime="2015-08-15T20:19:02+08:00">2015-08-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-01-02 23:27:56" itemprop="dateModified" datetime="2019-01-02T23:27:56+08:00">2019-01-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E6%B5%B7%E6%8B%BE%E8%B4%9D/" itemprop="url" rel="index"><span itemprop="name">学海拾贝</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="VIM简介"><a href="#VIM简介" class="headerlink" title="VIM简介"></a>VIM简介</h3><p>vi: Visual Interface,文本编辑器 </p>
<p>文本:ASCII, Unicode </p>
<p>文本编辑种类: </p>
<pre><code>行编辑器: sed 

全屏编辑器:nano, vi 

vim - Vi Improved </code></pre><p>其他编辑器: </p>
<pre><code>gedit 一个简单的图形编辑器 

gvim 一个Vim编辑器的图形版本 </code></pre><h4 id="打开文件"><a href="#打开文件" class="headerlink" title="打开文件"></a>打开文件</h4><p>vim [OPTION]… FILE…</p>
<pre><code>+#: 打开文件后,让光标处于第#行的行首,+默认行尾 

+/PATTERN:打开文件后,直接让光标处于第一个被PATTERN匹配到的行的行首 

–b file 二进制方式打开文件 

–d file1 file2… 比较多个文件 

-m file 只读打开文件 </code></pre><p>ex file 或 vim –e 直接进入ex模式 </p>
<p>如果该文件存在,文件被打开并显示内容 如果该文件不存在,当编辑后第一次存盘时创建它 </p>
<h4 id="vim-一个模式编辑器"><a href="#vim-一个模式编辑器" class="headerlink" title="vim: 一个模式编辑器"></a>vim: 一个模式编辑器</h4><p>击键行为是依赖于 vim的 的”模式” </p>
<p>三种主要模式: </p>
<pre><code>命令(Normal)模式:默认模式,移动光标,剪切/粘贴文本 

插入(Insert)或编辑模式: 修改文本 

扩展命令(extended command )模式: 保存,退出等 </code></pre><p>Esc键 退出当前模式 </p>
<p>Esc键 Esc键 总是返回到命令模式 </p>
<h4 id="模式转换"><a href="#模式转换" class="headerlink" title="模式转换"></a>模式转换</h4><p>命令模式 –&gt; 插入模式 </p>
<pre><code>i: insert, 在光标所在处输入 

I:在当前光标所在行的行首输入 

a: append, 在光标所在处后面输入 

A:在当前光标所在行的行尾输入 

o: 在当前光标所在行的下方打开一个新行 

O:在当前光标所在行的上方打开一个新行 </code></pre><p>插入模式 ——–&gt; 命令模式 </p>
<pre><code>ESC </code></pre><p>命令模式 ——–&gt; 扩展命令模式 </p>
<pre><code>: </code></pre><p>扩展命令模式 ——–&gt; 命令模式 </p>
<pre><code>ESC,enter </code></pre><h4 id="关闭文件"><a href="#关闭文件" class="headerlink" title="关闭文件"></a>关闭文件</h4><p>扩展模式: </p>
<pre><code>:q 退出 

:q! 强制退出,丢弃做出的修改 

:wq 保存退出 :x 保存退出 </code></pre><p>命令模式 </p>
<pre><code>ZZ: 保存退出 

ZQ:不保存退出 </code></pre><h4 id="扩展模式"><a href="#扩展模式" class="headerlink" title="扩展模式"></a>扩展模式</h4><p>按”:”进入Ex模式 </p>
<p>创建一个命令提示符: 处于底部的屏幕左侧 </p>
<p>命令: </p>
<pre><code>w     写(存)磁盘文件 

wq     写入并退出 

x     写入并退出 

q     退出 

q！     不存盘退出,即使更改都将丢失 

r filename     读文件内容到当前文件中 

w filename     将当前文件内容写入另一个文件 

!command     执行命令 

r!command     读入命令的输出 </code></pre><h4 id="命令模式光标跳转"><a href="#命令模式光标跳转" class="headerlink" title="命令模式光标跳转"></a>命令模式光标跳转</h4><p>字符间跳转: </p>
<pre><code>h: 左 l: 右 j: 下 k: 上 

#COMMAND:跳转由#指定的个数的字符 </code></pre><p>单词间跳转: </p>
<pre><code>w:下一个单词的词首 

e:当前或下一单词的词尾 

b:当前或前一个单词的词首 

#COMMAND:由#指定一次跳转的单词数 </code></pre><p>当前页跳转: </p>
<pre><code>H:页首 M:页中间行 L:页底 </code></pre><p>行首行尾跳转:</p>
<pre><code>^: 跳转至行首的第一个非空白字符 

0: 跳转至行首 

$: 跳转至行尾 </code></pre><p>行间移动: </p>
<pre><code>#G、扩展模式:# :跳转至由#指定行 

G:最后一行 

1G, gg: 第一行 </code></pre><p>句间移动: </p>
<pre><code>):下一句 (:上一句 </code></pre><p>段落间移动: </p>
<pre><code>}:下一段 {:上一段 </code></pre><h4 id="命令模式翻屏操作"><a href="#命令模式翻屏操作" class="headerlink" title="命令模式翻屏操作"></a>命令模式翻屏操作</h4><p>Ctrl+f: 向文件尾部翻一屏 </p>
<p>Ctrl+b: 向文件首部翻一屏 </p>
<p>Ctrl+d: 向文件尾部翻半屏 </p>
<p>Ctrl+u:向文件首部翻半屏 </p>
<h4 id="命令模式操作"><a href="#命令模式操作" class="headerlink" title="命令模式操作"></a>命令模式操作</h4><p>字符编辑: </p>
<pre><code>x: 删除光标处的字符 

#x: 删除光标处起始的#个字符 

xp: 交换光标所在处的字符及其后面字符的位置 

~:转换大小写 

J:删除当前行后的换行符 </code></pre><p>替换命令(r, replace) </p>
<pre><code>r: 替换光标所在处的字符 

R:切换成REPLACE模式 </code></pre><p>删除命令: </p>
<pre><code>d: 删除命令,可结合光标跳转字符,实现范围删除 

d$: 删除到行尾 

d^:删除到非空行首 

d0:删除到行首 

dw: 

de: 

db: 

#COMMAND </code></pre><p>dd: 删除光标所在的行 </p>
<pre><code>#dd:多行删除 </code></pre><p>D:从当前光标位置一直删除到行尾,留空行,等同于d$ </p>
<p>复制命令(y, yank): </p>
<pre><code>y: 复制,行为相似于d命令 

y$ 

y0 

y^ 

ye 

yw 

yb 

#COMMAND </code></pre><p>yy:复制行 </p>
<pre><code>#yy: 复制多行 </code></pre><p>Y: 复制整行 </p>
<p>粘贴命令(p, paste): </p>
<pre><code>p:缓冲区存的如果为整行,则粘贴当前光标所在行的下方;否则,则粘贴 至当前光标所在处的后面 

P:缓冲区存的如果为整行,则粘贴当前光标所在行的上方；否则,则粘贴 至当前光标所在处的前面 </code></pre><p> 改变命令(c, change) </p>
<pre><code>c: 修改后切换成插入模式 </code></pre><p> 命令模式 –&gt; 插入模式 </p>
<pre><code>c$ 

c^ 

c0 

cb 

ce 

cw 

#COMMAND </code></pre><p> cc:删除当前行并输入新内容,相当于S </p>
<pre><code>#cc: </code></pre><p> C:删除当前光标到行尾,并切换成插入模式 </p>
<h4 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h4><p>100imark [ESC] 粘贴”mark”100次 </p>
<p>&lt;start position&gt;&lt;commend&gt;&lt;end position&gt; </p>
<p>Command: </p>
<pre><code>y 复制、d 删除、gU 变大写、gu 变小写 </code></pre><p>例如 0y$ 命令意味着: </p>
<pre><code>0 → 先到行头 

y → 从这里开始拷贝 

$ → 拷贝到本行最后一个字符 

ye 从当前位置拷贝到本单词的最后一个字符 </code></pre><h4 id="扩展命令模式-地址定界"><a href="#扩展命令模式-地址定界" class="headerlink" title="扩展命令模式:地址定界"></a>扩展命令模式:地址定界</h4><p>地址定界 </p>
<pre><code>:start_pos,end_pos 

\# 具体第#行,例如2表示第2行 

\#,# 从左侧#表示起始行,到右侧#表示结尾行 

\#,+# 从左侧#表示的起始行,加上右侧#表示的行数 

    :2,+3 表示2到5行

 . 当前行 

$ 最后一行 

    .,$-1 当前行到倒数第二行 

% 全文, 相当于1,$ </code></pre><p>/pat1/,/pat2/ </p>
<pre><code>从第一次被pat1模式匹配到的行开始,一直到第一次被pat2匹配到的行结 束 

#,/pat/ 

/pat/,$ </code></pre><p>使用方式:后跟一个编辑命令 </p>
<pre><code>d 

y 

w file: 将范围内的行另存至指定文件中 

r file:在指定位置插入指定文件中的所有内容 </code></pre><h4 id="扩展命令模式-查找"><a href="#扩展命令模式-查找" class="headerlink" title="扩展命令模式:查找"></a>扩展命令模式:查找</h4><p>查找 </p>
<pre><code>/PATTERN:从当前光标所在处向文件尾部查找 

?PATTERN:从当前光标所在处向文件首部查找 

n:与命令同方向 

N:与命令反方向 </code></pre><h4 id="扩展命令模式-查找并替换"><a href="#扩展命令模式-查找并替换" class="headerlink" title="扩展命令模式:查找并替换"></a>扩展命令模式:查找并替换</h4><p>s: 在扩展模式下完成查找替换操作 </p>
<pre><code>格式:s/要查找的内容/替换为的内容/修饰符 

要查找的内容:可使用模式 

替换为的内容:不能使用模式,但可以使用\1, \2, ...等后向引用符号；还可 以使用&quot;&amp;&quot;引用前面查找时查找到的整个内容 

修饰符: 

i: 忽略大小写 

g: 全局替换；默认情况下,每一行只替换第一次出现 

gc:全局替换,每次替换前询问 </code></pre><p>查找替换中的分隔符/可替换为其它字符,例如 </p>
<pre><code>s@/etc@/var@g 

s#/boot#/#i </code></pre><h4 id="命令模式-撤销更改"><a href="#命令模式-撤销更改" class="headerlink" title="命令模式:撤销更改"></a>命令模式:撤销更改</h4><p>u    撤销最近的更改 </p>
<p>#u    撤销之前多次更改 </p>
<p>U     撤消光标落在这行后所有此行的更改 </p>
<p>按Ctrl - r重做最后的”撤消”更改 </p>
<p>.     重复前一个操作 </p>
<p>n.    重复前一个操作n次 </p>
<h4 id="vim的寄存器"><a href="#vim的寄存器" class="headerlink" title="vim的寄存器"></a>vim的寄存器</h4><p>有26个命名寄存器和1个无命名寄存器,常存放不同的剪贴版内容,可以不同会话间共享 </p>
<p>寄存器名称a,b,…,z,格式:”寄存器 放在数字和命令之间 </p>
<pre><code>如:3&quot;tyy 表示复制3行到t寄存器中  

&quot;tp 表示将t寄存器内容粘贴 </code></pre><p>未指定,将使用无命名寄存器 </p>
<p>有10个数字寄存器,用0,1,…,9表示,0存放最近复制内容,1存放最近删除内容。当新的文本变更和删除时,1转存到2,2转存到3,以此类推。数字寄存器不能在不 同会话间共享 </p>
<h4 id="编辑二进制文件"><a href="#编辑二进制文件" class="headerlink" title="编辑二进制文件"></a>编辑二进制文件</h4><p>以二进制方式打开文件 </p>
<pre><code>vim –b binaryfile </code></pre><p>扩展命令模式下,利用xxd命令转换为可读的十六进制 </p>
<pre><code>:%!xxd </code></pre><p>编辑二进制文件 </p>
<p>扩展命令模式下,利用xxd命令转换回二进制 </p>
<pre><code>:%!xxd –r </code></pre><p>保存退出</p>
<h4 id="可视化模式"><a href="#可视化模式" class="headerlink" title="可视化模式"></a>可视化模式</h4><p>允许选择的文本块 </p>
<pre><code>v 面向字符 

V 面向行 

ctrl-v 面向块 </code></pre><p>可视化键可用于与移动键结合使用: </p>
<pre><code>w ) } 箭头等 </code></pre><p>突出显示的文字可被删除,复制,变更,过滤,搜索,替换等</p>
<h4 id="多文件模式"><a href="#多文件模式" class="headerlink" title="多文件模式"></a>多文件模式</h4><p>vim FILE1 FILE2 FILE3 … </p>
<pre><code>:next 下一个 

:prev 前一个 

:first 第一个 

:last 最后一个 

:wall 保存所有 

:qall 退出所有 

:wqall 保存退出所有</code></pre><h4 id="使用多个窗口"><a href="#使用多个窗口" class="headerlink" title="使用多个窗口"></a>使用多个窗口</h4><p>多文件分割 </p>
<pre><code>vim -o|-O FILE1 FILE2 ... 

-o: 水平分割 

-O: 垂直分割 

在窗口间切换:Ctrl+w, Arrow </code></pre><p>单文件窗口分割: </p>
<pre><code>Ctrl+w,s: split, 水平分割 

Ctrl+w,v: vertical, 垂直分割 

ctrl+w,q:取消相邻窗口 

ctrl+w,o:取消全部窗口 

:wqall 退出 </code></pre><h4 id="定制vim的工作特性"><a href="#定制vim的工作特性" class="headerlink" title="定制vim的工作特性"></a>定制vim的工作特性</h4><p>配置文件:永久有效 </p>
<pre><code>全局:/etc/vimrc 

个人:~/.vimrc </code></pre><p>扩展模式:当前vim进程有效 </p>
<p>(1) 行号 </p>
<pre><code>显示:set number, 简写为set nu 

取消显示:set nonumber, 简写为set nonu </code></pre><p>(2) 忽略字符的大小写 </p>
<pre><code>启用:set ic 

不忽略:set noic </code></pre><p>(3) 自动缩进 </p>
<pre><code>启用:set ai 

禁用:set noai</code></pre><p>(4) 智能缩进 </p>
<pre><code>启用:smartindent 简写 set si 

禁用:set nosi </code></pre><p>(5) 高亮搜索 </p>
<pre><code>启用:set hlsearch 

禁用:set nohlsearch </code></pre><p>(6) 语法高亮 </p>
<pre><code>启用:syntax on 

禁用:syntax off </code></pre><p>(7) 显示Tab和换行符 ^I 和$显示 </p>
<pre><code>启用:set list 

禁用:set nolist </code></pre><p>(8) 文件格式 </p>
<pre><code>启用windows格式:set fileformat=dos 

启用unix格式:set fileformat=unix 

简写: set ff=dos|unix </code></pre><p>(9) 设置文本宽度 </p>
<pre><code>启用: set textwidth=65 (vim only) 

禁用: set wrapmargin=15 </code></pre><p>(10) 设置光标所在行的标识线 </p>
<pre><code>启用:set cursorline,简写cul 

禁用:set no cursorline </code></pre><p>(11) 复制保留格式 </p>
<pre><code>启用: set paste 

禁用: set nopaste </code></pre><h4 id="了解更多"><a href="#了解更多" class="headerlink" title="了解更多"></a>了解更多</h4><p>Set 帮助 </p>
<pre><code>:help option-list 

:set or :set all </code></pre><p>vi/vim内置帮助 </p>
<pre><code>:help 

:help topic 

Use :q to exit help </code></pre><p>vimtutor </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Linux-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7-%E4%B8%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mark_avatar.png">
      <meta itemprop="name" content="Mark">
      <meta itemprop="description" content="半吊子民工 英特纳雄耐尔就一定要实现">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mark blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Linux-%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7-%E4%B8%80/" class="post-title-link" itemprop="url">Linux 文本处理工具(一)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-08-10 20:18:34" itemprop="dateCreated datePublished" datetime="2015-08-10T20:18:34+08:00">2015-08-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-01-02 23:27:42" itemprop="dateModified" datetime="2019-01-02T23:27:42+08:00">2019-01-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E6%B5%B7%E6%8B%BE%E8%B4%9D/" itemprop="url" rel="index"><span itemprop="name">学海拾贝</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="抽取文本的工具"><a href="#抽取文本的工具" class="headerlink" title="抽取文本的工具"></a>抽取文本的工具</h3><p>文件内容:less和 cat</p>
<p>文件截取:head和tail </p>
<p>按列抽取:cut </p>
<p>按关键字抽取:grep</p>
<h4 id="文件查看"><a href="#文件查看" class="headerlink" title="文件查看"></a>文件查看</h4><p>文件查看命令 : </p>
<p>cat ,tac ,rev </p>
<p>cat [OPTION]… [FILE]… </p>
<pre><code>-E: 显示行结束符$ 

-n: 对显示出的每一行进行编号 

-A:显示所有控制符 

-b:非空行编号 

-s:压缩连续的空行成一行 </code></pre><p>tac </p>
<p>rev </p>
<h4 id="分页查看文件内容"><a href="#分页查看文件内容" class="headerlink" title="分页查看文件内容"></a>分页查看文件内容</h4><p>more: 分页查看文件 </p>
<p>more [OPTIONS…] FILE… </p>
<pre><code>-d: 显示翻页及退出提示 </code></pre><p>less:一页一页地查看文件或STDIN输出 </p>
<p>查看时有用的命令包括: </p>
<pre><code>/文本 搜索 文本 

n/N 跳到下一个 或 上一个匹配 </code></pre><p>less 命令是man命令使用的分页器 </p>
<h4 id="显示文本前或后行内容"><a href="#显示文本前或后行内容" class="headerlink" title="显示文本前或后行内容"></a>显示文本前或后行内容</h4><p>head [OPTION]… [FILE]… </p>
<pre><code>-c #: 指定获取前#字节 

-n #: 指定获取前#行 

-#: 指定行数 </code></pre><p>tail [OPTION]… [FILE]… </p>
<pre><code>-c #: 指定获取后#字节 </code></pre><p>​    -n #: 指定获取后#行 </p>
<pre><code>-f: 跟踪显示文件fd新追加的内容,常用日志监控 

相当于 --follow=descriptor 

-F: 跟踪文件名,相当于—follow=name --retry     </code></pre><p>tailf 类似tail –f,当文件不增长时并不访问文件 </p>
<h4 id="按列抽取文本cut和合并文件paste"><a href="#按列抽取文本cut和合并文件paste" class="headerlink" title="按列抽取文本cut和合并文件paste"></a>按列抽取文本cut和合并文件paste</h4><p>cut [OPTION]… [FILE]… </p>
<pre><code>-d DELIMITER: 指明分隔符,默认tab </code></pre><p>​    -f FILEDS:     </p>
<p>​        #: 第#个字段 </p>
<p>​        #,#[,#]:离散的多个字段,例如1,3,6     </p>
<pre><code>#-#:连续的多个字段, 例如1-6 </code></pre><p>混合使用:1-3,7 </p>
<p>-c 按字符切割 </p>
<p>–output-delimiter=STRING指定输出分隔符 </p>
<h4 id="cut和paste"><a href="#cut和paste" class="headerlink" title="cut和paste"></a>cut和paste</h4><p>显示文件或STDIN数据的指定列 </p>
<p>​    cut -d: -f1 /etc/passwd        //以 : 为分隔符取出第一个参数</p>
<pre><code>cat /etc/passwd | cut -d: -f7 </code></pre><p>​    cut -c2-5 /usr/share/dict/words </p>
<p>paste 合并两个文件同行号的列到一行 </p>
<pre><code>paste [OPTION]... [FILE]... </code></pre><p>​    -d 分隔符:指定分隔符,默认用TAB </p>
<p>​    -s : 所有行合成一行显示 </p>
<p>​    paste f1 f2 </p>
<p>​    paste -s f1 f2         </p>
<h3 id="分析文本的工具"><a href="#分析文本的工具" class="headerlink" title="分析文本的工具"></a>分析文本的工具</h3><p>文本数据统计:wc </p>
<p>整理文本:sort </p>
<p>比较文件:diff和patch </p>
<h4 id="收集文本统计数据wc"><a href="#收集文本统计数据wc" class="headerlink" title="收集文本统计数据wc"></a>收集文本统计数据wc</h4><p>计数单词总数、行总数、字节总数和字符总数 </p>
<p>可以对文件或STDIN中的数据运行 </p>
<pre><code>wc story.txt 

39     237 1901     story.txt 

行数 字数 字节数  文件名</code></pre><p>常用选项 </p>
<p>​    -l    只计数行数 </p>
<p>​    -w     只计数单词总数 </p>
<p>​    -c     只计数字节总数 </p>
<p>​    -m     只计数字符总数 </p>
<p>​    -L     显示文件中最长行的长度     </p>
<h4 id="文本排序sort"><a href="#文本排序sort" class="headerlink" title="文本排序sort"></a>文本排序sort</h4><p>把整理过的文本显示在STDOUT,不改变原始文件 </p>
<pre><code>sort [options] file(s) </code></pre><p>常用选项 </p>
<p>​    -r     执行反方向(由上至下)整理 </p>
<p>​    -R     随机排序 </p>
<p>​    -n     执行按数字大小整理 </p>
<p>​    -f     选项忽略(fold)字符串中的字符大小写 </p>
<p>​    -u     选项(独特,unique)删除输出中的重复行 </p>
<p>​    -t c     选项使用c做为字段界定符 </p>
<p>​    -k X 选项按照使用c字符分隔的X列来整理能够使用多次     </p>
<h4 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h4><p>uniq命令:从输入中删除前后相接的重复的行 </p>
<p>uniq [OPTION]… [FILE]… </p>
<p>​    -c:     显示每行重复出现的次数 </p>
<p>​    -d:     仅显示重复过的行 </p>
<p>​    -u:     仅显示不曾重复的行 </p>
<p>​    注:连续且完全相同方为重复     </p>
<p>常和sort 命令一起配合使用: </p>
<pre><code>sort userlist.txt | uniq -c </code></pre><h4 id="比较文件"><a href="#比较文件" class="headerlink" title="比较文件"></a>比较文件</h4><p>比较两个文件之间的区别 </p>
<pre><code>diff foo.conf foo2.conf 

5c5 

&lt; use_widgets = no 

--- 

&gt; use_widgets = yes </code></pre><p>注明第5行有区别(改变) </p>
<h4 id="复制对文件改变patch"><a href="#复制对文件改变patch" class="headerlink" title="复制对文件改变patch"></a>复制对文件改变patch</h4><p>diff 命令的输出被保存在一种叫做”补丁”的文件中 </p>
<pre><code>使用 -u 选项来输出&quot;统一的(unified)&quot;diff格式文件,最适用于补丁文件 </code></pre><p>patch 复制在其它文件中进行的改变(要谨慎使用) </p>
<pre><code>适用 -b 选项来自动备份改变了的文件 

$ diff -u foo.conf foo2.conf &gt; foo.patch 

$ patch -b foo.conf foo.patch </code></pre><h3 id="Linux文本处理三剑客"><a href="#Linux文本处理三剑客" class="headerlink" title="Linux文本处理三剑客"></a>Linux文本处理三剑客</h3><p>grep:文本过滤(模式:pattern)工具 </p>
<pre><code>grep, egrep, fgrep(不支持正则表达式搜索) </code></pre><p>sed:stream editor,文本编辑工具 </p>
<p>awk:Linux上的实现gawk,文本报告生成器 </p>
<h4 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h4><p>grep: Global search REgular expression and Print out the line </p>
<p>作用:文本搜索工具,根据用户指定的”模式”对目标文本逐行进行匹配检 查；打印匹配到的行 </p>
<p>模式:由正则表达式字符及文本字符所编写的过滤条件     </p>
<p>grep [OPTIONS] PATTERN [FILE…] </p>
<pre><code>grep root /etc/passwd 

grep &quot;$USER&quot; /etc/passwd 

grep &apos;$USER&apos; /etc/passwd 

grep \`whoami` /etc/passwd </code></pre><h4 id="grep命令选项"><a href="#grep命令选项" class="headerlink" title="grep命令选项"></a>grep命令选项</h4><pre><code>--color=auto: 对匹配到的文本着色显示 

-v: 显示不被pattern匹配到的行 

-i: 忽略字符大小写 

-n:显示匹配的行号 

-c: 统计匹配的行数 

-o: 仅显示匹配到的字符串 

-q: 静默模式,不输出任何信息 

-A #: after, 后#行 

-B #: before, 前#行 

-C #:context, 前后各#行 

-e:实现多个选项间的逻辑or关系 

   grep –e ‘cat ’ -e ‘dog’ file 

-w:匹配整个单词 

-E:使用ERE 

   使用正则表达式

-F:相当于fgrep,不支持正则表达式 

   可以测试文件1和文件2的包含关系</code></pre><h4 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h4><p>REGEXP:由一类特殊字符及文本字符所编写的模式,其中有些字符(元字符)不表示字符字面意义,而表示控制或通配的功能 </p>
<p>程序支持:grep,sed,awk,vim, less,nginx,varnish等 </p>
<p>分两类: </p>
<p>基本正则表达式:BRE </p>
<p>扩展正则表达式:ERE </p>
<pre><code>grep -E, egrep </code></pre><p>正则表达式引擎: </p>
<p>采用不同算法,检查处理正则表达式的软件模块 </p>
<p>PCRE(Perl Compatible Regular Expressions) </p>
<p>元字符分类:字符匹配、匹配次数、位置锚定、分组 </p>
<p>man 7 regex </p>
<h4 id="基本正则表达式元字符"><a href="#基本正则表达式元字符" class="headerlink" title="基本正则表达式元字符"></a>基本正则表达式元字符</h4><p> 字符匹配:<br>​    . 匹配任意单个字符<br>​    [] 匹配指定范围内的任意单个字符<br>​    [^] 匹配指定范围外的任意单个字符<br>​    [:alnum:] 字母和数字<br>​    [:alpha:] 代表任何英文大小写字符,亦即 A-Z, a-z<br>​    [:lower:] 小写字母 [:upper:] 大写字母<br>​    [:blank:] 空白字符(空格和制表符)<br>​    [:space:] 水平和垂直的空白字符(比[:blank:]包含的范围广)<br>​    [:cntrl:] 不可打印的控制字符(退格、删除、警铃…)<br>​    [:digit:] 十进制数字 [:xdigit:]十六进制数字<br>​    [:graph:] 可打印的非空白字符<br>​    [:print:] 可打印字符<br>​    [:punct:] 标点符号</p>
<h4 id="正则表达式-1"><a href="#正则表达式-1" class="headerlink" title="正则表达式"></a>正则表达式</h4><p>匹配次数:用在要指定次数的字符后面,用于指定前面的字符要出现的次数 </p>
<p>位置锚定:定位出现的位置 </p>
<p>^                 行首锚定,用于模式的最左侧 </p>
<p>$                行尾锚定,用于模式的最右侧 </p>
<p>^PATTERN$         用于模式匹配整行 </p>
<p>^$                 空行 </p>
<p>^[[:space:]]*$     空白行 </p>
<p>&lt; 或 \b             词首锚定,用于单词模式的左侧 </p>
<p>&gt; 或 \b             词尾锚定；用于单词模式的右侧 </p>
<p>&lt;PATTERN\&gt;         匹配整个单词 </p>
<p>分组:\(\)             将一个或多个字符捆绑在一起,当作一个整体进行处理,如: \(root\)\+ </p>
<p>分组括号中的模式匹配到的内容会被正则表达式引擎记录于内部的变量中,这 些变量的命名方式为: \1, \2, \3, … </p>
<p>\1 表示从左侧起第一个左括号以及与之匹配右括号之间的模式所匹配到的字符 </p>
<p>示例: \(string1\+\(string2\)*\) </p>
<pre><code>\1 :string1\\+\\(string2\\)* 

\2 :string2 </code></pre><p>后向引用:引用前面的分组括号中的模式所匹配字符,而非模式本身 </p>
<p>或者:\| </p>
<pre><code>示例:a\\|b: a或b C\\|cat: C或cat \\(C\\|c\\)at:Cat或cat </code></pre><table>
<thead>
<tr>
<th>元字符</th>
<th>定义</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>行首</td>
</tr>
<tr>
<td>$</td>
<td>行尾</td>
</tr>
<tr>
<td>.</td>
<td>任意单一字符</td>
</tr>
<tr>
<td>[]</td>
<td>[]内任意单一字符</td>
</tr>
<tr>
<td>[^]</td>
<td>除[]内任意单一字符</td>
</tr>
<tr>
<td>*</td>
<td>*前面字符重复不确定次数</td>
</tr>
<tr>
<td>\+</td>
<td>\+前面字符重复一次以上不确定次数</td>
</tr>
<tr>
<td>?</td>
<td>? 前面字符重复0或1次</td>
</tr>
<tr>
<td>\</td>
<td>转义符</td>
</tr>
<tr>
<td>.*</td>
<td>任意长度字符</td>
</tr>
<tr>
<td>\{n\}</td>
<td>前面字符重复n次</td>
</tr>
<tr>
<td>\{n,\}</td>
<td>前面字符重复n次以上</td>
</tr>
<tr>
<td>\{m,n\}</td>
<td>前面字符重复m次和n次之间</td>
</tr>
<tr>
<td>[:alnum:]</td>
<td>字母和数字</td>
</tr>
<tr>
<td>[:alpha:]</td>
<td>代表任何英文大小写字符,即 A-Z,a-z</td>
</tr>
<tr>
<td>[:lower:]</td>
<td>小写字母</td>
</tr>
<tr>
<td>[:upper:]</td>
<td>大写字母</td>
</tr>
<tr>
<td>[:blank:]</td>
<td>水平空白字符(空格和制表符)</td>
</tr>
<tr>
<td>[:space:]</td>
<td>所有水平和垂直的空白字符(比[:blank:]包含的范围广)</td>
</tr>
<tr>
<td>[:cntrl:]</td>
<td>不可打印的控制字符(退格,删除,警铃)</td>
</tr>
<tr>
<td>[:digit:]</td>
<td>十进制数字</td>
</tr>
<tr>
<td>[:graph:]</td>
<td>可打印的非空白字符</td>
</tr>
<tr>
<td>[:punct:]</td>
<td>标点符号</td>
</tr>
<tr>
<td>[:xdigit:]</td>
<td>十六进制数字</td>
</tr>
</tbody></table>
<h4 id="egrep及扩展的正则表达式"><a href="#egrep及扩展的正则表达式" class="headerlink" title="egrep及扩展的正则表达式"></a>egrep及扩展的正则表达式</h4><p>egrep = grep -E </p>
<p>egrep [OPTIONS] PATTERN [FILE…] </p>
<p>扩展正则表达式的元字符: </p>
<p>字符匹配: </p>
<pre><code>. 任意单个字符 

[] 指定范围的字符 

[^] 不在指定范围的字符     </code></pre><h4 id="扩展正则表达式"><a href="#扩展正则表达式" class="headerlink" title="扩展正则表达式"></a>扩展正则表达式</h4><p>次数匹配:</p>
<pre><code> *:匹配前面字符任意次 

?: 0或1次 

+:1次或多次 

{m}:匹配m次 

{m,n}:至少m,至多n次     </code></pre><p>位置锚定:</p>
<pre><code> ^ :行首 

$ :行尾 

\&lt;, \b :语首 

\&gt;, \b :语尾     </code></pre><p>分组: </p>
<pre><code>() 

后向引用:\1, \2, ...     </code></pre><p>或者: </p>
<pre><code>a|b: a或b 

C|cat: C或cat 

(C|c)at:Cat或cat    </code></pre><h4 id="sed工具"><a href="#sed工具" class="headerlink" title="sed工具"></a>sed工具</h4><p>用法: </p>
<pre><code>sed [option]... &apos;script&apos; inputfile... </code></pre><p>常用选项: </p>
<pre><code>-n:不输出模式空间内容到屏幕,即不自动打印 

-e: 多点编辑 

-f:/PATH/SCRIPT_FILE: 从指定文件中读取编辑脚本 

-r: 支持使用扩展正则表达式 

-i.bak: 备份文件并原处编辑     </code></pre><p>script: </p>
<pre><code>&apos;地址命令&apos; </code></pre><p>地址定界:<br>(1) 不给地址:对全文进行处理<br>(2) 单地址:<br>​    #: 指定的行,$:最后一行<br>​    /pattern/:被此处模式所能够匹配到的每一行<br>(3) 地址范围:<br>​    #,#<br>​    #,+#<br>​    /pat1/,/pat2/<br>​    #,/pat1/<br>(4) <del>:步进<br>​    1</del>2 奇数行<br>​    2~2 偶数行</p>
<p>编辑命令: </p>
<pre><code>d             删除模式空间匹配的行,并立即启用下一轮循环 

p             打印当前模式空间内容,追加到默认输出之后 

a [\\]text         在指定行后面追加文本,支持使用\n实现多行追加 

i [\\\]text         在行前面插入文本 

c [\]text         替换行为单行或多行文本 

w /path/file     保存模式匹配的行至指定文件 

r /path/file     读取指定文件的文本至模式空间中匹配到的行后 

=             为模式空间中的行打印行号 

!             模式空间中匹配行取反处理     </code></pre><p>s/// 查找替换,支持使用其它分隔符,s@@@,s### </p>
<p>替换标记: </p>
<pre><code>g         行内全局替换 

p         显示替换成功的行 

w         /PATH/FILE 将替换成功的行保存至文件中     </code></pre><h4 id="高级编辑命令"><a href="#高级编辑命令" class="headerlink" title="高级编辑命令"></a>高级编辑命令</h4><pre><code>P: 打印模式空间开端至\n内容,并追加到默认输出之前 

h: 把模式空间中的内容覆盖至保持空间中 

H:把模式空间中的内容追加至保持空间中 

g: 从保持空间取出数据覆盖至模式空间 

G:从保持空间取出内容追加至模式空间 

x: 把模式空间中的内容与保持空间中的内容进行互换 

n: 读取匹配到的行的下一行覆盖至模式空间 

N:读取匹配到的行的下一行追加至模式空间 

d: 删除模式空间中的行 

D:如果模式空间包含换行符,则删除直到第一个换行符的模式空间中的文本, 并不会读取新的输入行,而使用合成的模式空间重新启动循环。如果模式空间 不包含换行符,则会像发出d命令那样启动正常的新循环 </code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Linux-%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mark_avatar.png">
      <meta itemprop="name" content="Mark">
      <meta itemprop="description" content="半吊子民工 英特纳雄耐尔就一定要实现">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mark blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Linux-%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84/" class="post-title-link" itemprop="url">Linux 用户和组</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-08-04 20:04:56" itemprop="dateCreated datePublished" datetime="2015-08-04T20:04:56+08:00">2015-08-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-01-02 23:27:00" itemprop="dateModified" datetime="2019-01-02T23:27:00+08:00">2019-01-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E6%B5%B7%E6%8B%BE%E8%B4%9D/" itemprop="url" rel="index"><span itemprop="name">学海拾贝</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="用户user"><a href="#用户user" class="headerlink" title="用户user"></a>用户user</h4><p>令牌token,identity </p>
<p>Linux用户:Username/UID </p>
<p>管理员:root, 0 </p>
<p>普通用户:1-60000 自动分配 </p>
<p>系统用户:1-499, 1-999 (CentOS7) </p>
<p>对守护进程获取资源进行权限分配 </p>
<p>登录用户:500+, 1000+(CentOS7) </p>
<p>交互式登录 </p>
<h4 id="组group"><a href="#组group" class="headerlink" title="组group"></a>组group</h4><p>Linux组:Groupname/GID </p>
<p>管理员组:root, 0 </p>
<p>普通组: </p>
<p>系统组:1-499, 1-999(CENTOS7) </p>
<p>普通组:500+, 1000+(CENTOS7)</p>
<h4 id="安全上下文"><a href="#安全上下文" class="headerlink" title="安全上下文"></a>安全上下文</h4><p> Linux安全上下文 </p>
<p>运行中的程序:进程 (process) </p>
<p>以进程发起者的身份运行: </p>
<pre><code>root: /bin/cat 

mark: /bin/cat </code></pre><p>进程所能够访问资源的权限取决于进程的运行者的身份 </p>
<h4 id="组的类别"><a href="#组的类别" class="headerlink" title="组的类别"></a>组的类别</h4><p>Linux组的类别 </p>
<p>用户的主要组(primary group) </p>
<pre><code>用户必须属于一个且只有一个主组 

组名同用户名,且仅包含一个用户,私有组    </code></pre><p>用户的附加组(supplementary group) </p>
<pre><code>一个用户可以属于零个或多个辅助组 </code></pre><h4 id="用户和组的配置文件"><a href="#用户和组的配置文件" class="headerlink" title="用户和组的配置文件"></a>用户和组的配置文件</h4><p>Linux用户和组的主要配置文件: </p>
<pre><code>/etc/passwd:        

    名称,密码,UID,GID,描述信息,用户家目录,shell类型 

/etc/group:        

    组及其属性信息

/etc/shadow:        

    用户名:加密字段:上一次口令更改的时间:最小的口令有效期:最大的口令有效期:口令过期时间:口令过期宽限时间:账户有效期:最后一位是保留位

/etc/gshadow:    

    组密码及其相关属性 </code></pre><h4 id="passwd文件格式"><a href="#passwd文件格式" class="headerlink" title="passwd文件格式"></a>passwd文件格式</h4><p>login name:登录用名(mark) </p>
<p>passwd:密码 (x) </p>
<p>UID:用户身份编号 (1000) </p>
<p>GID:登录默认所在组编号 (1000) </p>
<p>GECOS:用户全名或注释 </p>
<p>home directory:用户主目录 (/home/mark) </p>
<p>shell:用户默认使用shell (/bin/bash) </p>
<p>账户中为!代表账户被锁定,虽然被锁定账户了,但是还是能够通过 su - username 来切换用户,但是如果将用户的 shell 类型设置为 nologin的话 再次切用户的时候是不能够输入命令的.</p>
<p>新建用户的时候如果不设置密码是无法登录的,会在shadow文件中出现!!,centOS7中会提示用户登录不需要密码.</p>
<p>使用 usermod -U username 来解锁</p>
<p>可以使用 chage username 来修改用户的账户时间</p>
<h4 id="shadow文件格式"><a href="#shadow文件格式" class="headerlink" title="shadow文件格式"></a>shadow文件格式</h4><p>登录用名 </p>
<p>用户密码:一般用sha512加密 </p>
<p>从1970年1月1日起到密码最近一次被更改的时间 </p>
<p>密码再过几天可以被变更(0表示随时可被变更) </p>
<p>密码再过几天必须被变更(99999表示永不过期) </p>
<p>密码过期前几天系统提醒用户(默认为一周) </p>
<p>密码过期几天后帐号会被锁定 </p>
<p>从1970年1月1日算起,多少天后帐号失效 </p>
<h4 id="密码加密"><a href="#密码加密" class="headerlink" title="密码加密"></a>密码加密</h4><p>加密机制: </p>
<pre><code>加密:明文--&gt; 密文 

解密:密文--&gt; 明文 </code></pre><p>单向加密:哈希算法,原文不同,密文必不同 </p>
<p>相同算法定长输出,获得密文不可逆推出原始数据 </p>
<p>雪崩效应:初始条件的微小改变,引起结果的巨大改变 </p>
<p>md5: message digest, 128bits </p>
<p>sha1: secure hash algorithm, 160bits </p>
<p>sha224: 224bits </p>
<p>sha256: 256bits </p>
<p>sha384: 384bits </p>
<p>sha512: 512bits </p>
<p> 更改加密算法: </p>
<pre><code>authconfig --passalgo=sha256 --update</code></pre><h4 id="密码的复杂性策略"><a href="#密码的复杂性策略" class="headerlink" title="密码的复杂性策略"></a>密码的复杂性策略</h4><p>使用数字、大写字母、小写字母及特殊字符中至少3种 </p>
<p>足够长 </p>
<p>使用随机密码 </p>
<p>定期更换,不要使用最近曾经使用过的密码 </p>
<h4 id="group文件格式"><a href="#group文件格式" class="headerlink" title="group文件格式"></a>group文件格式</h4><p>群组名称:就是群组名称 </p>
<p>群组密码:通常不需要设定,密码是被记录在 /etc/gshadow </p>
<p>GID:就是群组的 ID </p>
<p>以当前组为附加组的用户列表</p>
<p>(分隔符为逗号) </p>
<h4 id="gshdow文件格式"><a href="#gshdow文件格式" class="headerlink" title="gshdow文件格式"></a>gshdow文件格式</h4><p>群组名称:就是群组名称 </p>
<p>群组密码: </p>
<p>组管理员列表:组管理员的列表,更改组密码和成员 </p>
<p>以当前组为附加组的用户列表</p>
<p>(分隔符为逗号) </p>
<h4 id="用户和组管理命令"><a href="#用户和组管理命令" class="headerlink" title="用户和组管理命令"></a>用户和组管理命令</h4><p>用户管理命令 </p>
<pre><code>useradd 

usermod 

userdel </code></pre><p>组帐号维护命令 </p>
<pre><code>groupadd 

groupmod 

groupdel</code></pre><h4 id="用户创建-useradd"><a href="#用户创建-useradd" class="headerlink" title="用户创建:useradd"></a>用户创建:useradd</h4><p>useradd [options] LOGIN </p>
<pre><code>-u UID 

-o 配合-u 选项,不检查UID的唯一性 

-g GID:指明用户所属基本组,可为组名,也可以GID 

-c &quot;COMMENT&quot;:用户的注释信息 

-d HOME_DIR: 以指定的路径(不存在)为家目录 

-s SHELL: 指明用户的默认shell程序,可用列表在/etc/shells文件中 

-G GROUP1[,GROUP2,...]:为用户指明附加组,组须事先存在 

-N 不创建私用组做主组,使用users组做主组 </code></pre><p>​    -r: 创建系统用户 CentOS 6: ID&lt;500, CentOS 7: ID&lt;1000 </p>
<pre><code>-m 创建家目录,用于系统用户 </code></pre><p>​    -M 不创建家目录,用于非系统用户</p>
<p>使用 -r 选项创建系统用户的时候会默认不创建用户家目录,</p>
<p>默认值设定:/etc/default/useradd文件中 </p>
<p>显示或更改默认设置 </p>
<pre><code>useradd -D 

useradd –D -s SHELL 

useradd –D –b BASE_DIR </code></pre><p>​    useradd –D –g GROUP </p>
<h4 id="新建用户的相关文件和命令"><a href="#新建用户的相关文件和命令" class="headerlink" title="新建用户的相关文件和命令"></a>新建用户的相关文件和命令</h4><p>/etc/default/useradd </p>
<p>/etc/skel/*                 创建用户的时候默认的文件夹</p>
<p>/etc/login.defs            创建用户的时候默认的加密策略</p>
<p>newusers passwd        格式文件 批量创建用户 </p>
<p>chpasswd                 批量修改用户口令 </p>
<h4 id="用户属性修改"><a href="#用户属性修改" class="headerlink" title="用户属性修改"></a>用户属性修改</h4><p>usermod [OPTION] login </p>
<pre><code>-u UID: 新UID 

-g GID: 新主组 

-G GROUP1[,GROUP2,...[,GROUPN]]:新附加组,原来的附加组将会被 覆盖；若保留原有,则要同时使用-a选项 

-s SHELL:新的默认SHELL 

-c &apos;COMMENT&apos;:新的注释信息 

-d HOME: 新家目录不会自动创建；若要创建新家目录并移动原家数据, 同时使用-m选项 

-l login_name: 新的名字； 

-L: lock指定用户,在/etc/shadow 密码栏的增加 ! 

-U: unlock指定用户,将 /etc/shadow 密码栏的 ! 拿掉 

-e YYYY-MM-DD: 指明用户账号过期日期 </code></pre><p>​    -f INACTIVE: 设定非活动期限 </p>
<p>删除所有的附加组 usermod -G “” apache</p>
<h4 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h4><p>userdel [OPTION]… login </p>
<pre><code>-r: 删除用户家目录 </code></pre><h4 id="查看用户相关的ID信息"><a href="#查看用户相关的ID信息" class="headerlink" title="查看用户相关的ID信息"></a>查看用户相关的ID信息</h4><pre><code>id [OPTION]... [USER] 

-u: 显示UID 

-g: 显示GID 

-G: 显示用户所属的组的ID </code></pre><p>​    -n: 显示名称,需配合ugG使用 </p>
<p>可以用id来判断用户是否存在</p>
<h4 id="切换用户或以其它用户身份执行命令"><a href="#切换用户或以其它用户身份执行命令" class="headerlink" title="切换用户或以其它用户身份执行命令"></a>切换用户或以其它用户身份执行命令</h4><p>su [options…][-][user [args…]] </p>
<p>切换用户的方式: </p>
<p>​    su UserName:非登录式切换,即不会读取目标用户的配置文件,不改变 当前工作目录 </p>
<p>​    su - UserName:登录式切换,会读取目标用户的配置文件,切换至家目 录,完全切换 </p>
<p>​    root su至其他用户无须密码；非root用户切换时需要密码 </p>
<p>换个身份执行命令: </p>
<p>​    su [-] UserName -c ‘COMMAND’ </p>
<p>选项:-l –login </p>
<p>​    su -l UserName 相当于 su - UserName </p>
<h4 id="设置密码"><a href="#设置密码" class="headerlink" title="设置密码"></a>设置密码</h4><p>passwd [OPTIONS] UserName: 修改指定用户的密码 </p>
<p>常用选项: </p>
<pre><code>-d:删除指定用户密码 

-l:锁定指定用户 

-u:解锁指定用户 

-e:强制用户下次登录修改密码 

-f:强制操作 

-n mindays:指定最短使用期限 

-x maxdays:最大使用期限 

-w warndays:提前多少天开始警告 </code></pre><p>​    -i inactivedays:非活动期限     </p>
<p>​    –stdin:从标准输入接收用户密码 </p>
<p>示例:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo "PASSWORD" | passwd --stdin USERNAME &gt;/dev/null</span><br></pre></td></tr></table></figure>

<h4 id="修改用户密码策略"><a href="#修改用户密码策略" class="headerlink" title="修改用户密码策略"></a>修改用户密码策略</h4><p>chage [OPTION]… LOGIN </p>
<pre><code>-d LAST_DAY 

-E --expiredate EXPIRE_DATE 

-I --inactive INACTIVE 

-m --mindays MIN_DAYS 

-M --maxdays MAX_DAYS 

-W --warndays WARN_DAYS 

–l 显示密码策略     </code></pre><p>示例: </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chage -d 0 USERNAME  	//下一次登录强制重设密码 </span><br><span class="line"></span><br><span class="line">chage -m 0 –M 42 –W 14 –I 7 USERNAME </span><br><span class="line"></span><br><span class="line">chage -E 2016-09-10 USERNAME</span><br></pre></td></tr></table></figure>

<h4 id="创建组"><a href="#创建组" class="headerlink" title="创建组"></a>创建组</h4><p>groupadd [OPTION]… group_name </p>
<p>​    -g GID: 指明GID号；[GID_MIN, GID_MAX] </p>
<p>​    -r: 创建系统组 </p>
<p>​        CentOS 6: ID&lt;500     </p>
<p>​        CentOS 7: ID&lt;1000</p>
<h4 id="修改和删除组"><a href="#修改和删除组" class="headerlink" title="修改和删除组"></a>修改和删除组</h4><p>组属性修改:groupmod </p>
<p>groupmod [OPTION]… group </p>
<p>​    -n group_name: 新名字 </p>
<p>​    -g GID: 新的GID </p>
<p>组删除:groupdel </p>
<p>​    groupdel GROUP </p>
<h4 id="更改组密码"><a href="#更改组密码" class="headerlink" title="更改组密码"></a>更改组密码</h4><p>组密码:gpasswd </p>
<p>gpasswd [OPTION] GROUP </p>
<p>​    -a user 将user添加至指定组中 </p>
<p>​    -d user 从指定组中移除用户user </p>
<p>​    -A user1,user2,… 设置有管理权限的用户列表 </p>
<p>newgrp命令:临时切换主组 </p>
<p>如果用户本不属于此组,则需要组密码 </p>
<h4 id="更改和查看组成员"><a href="#更改和查看组成员" class="headerlink" title="更改和查看组成员"></a>更改和查看组成员</h4><p>groupmems [options][action] </p>
<p>options: </p>
<p>​    -g, –group groupname 更改为指定组 (只有root) </p>
<p>Actions:</p>
<p>​    -a, –add username 指定用户加入组 </p>
<p>​    -d, –delete username 从组中删除用户 </p>
<p>​    -p, –purge 从组中清除所有成员 </p>
<p>​    -l, –list 显示组成员列表     </p>
<p>groups [USERNAME]… 查看用户所属组列表 </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Linux-%E6%A0%87%E5%87%86IO%E5%92%8C%E7%AE%A1%E9%81%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mark_avatar.png">
      <meta itemprop="name" content="Mark">
      <meta itemprop="description" content="半吊子民工 英特纳雄耐尔就一定要实现">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mark blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Linux-%E6%A0%87%E5%87%86IO%E5%92%8C%E7%AE%A1%E9%81%93/" class="post-title-link" itemprop="url">Linux 标准IO和管道</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-30 19:55:44" itemprop="dateCreated datePublished" datetime="2015-07-30T19:55:44+08:00">2015-07-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-01-02 23:26:24" itemprop="dateModified" datetime="2019-01-02T23:26:24+08:00">2019-01-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E6%B5%B7%E6%8B%BE%E8%B4%9D/" itemprop="url" rel="index"><span itemprop="name">学海拾贝</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="标准输入和输出"><a href="#标准输入和输出" class="headerlink" title="标准输入和输出"></a>标准输入和输出</h3><p>程序:指令+数据 </p>
<p>​    读入数据:    Input </p>
<p>​    输出数据:    Output </p>
<p>打开的文件都有一个fd: file descriptor (文件描述符) </p>
<p>Linux给程序提供三种I/O设备 </p>
<p>​    标准输入(STDIN)     －0 默认接受来自键盘的输入 </p>
<p>​    标准输出(STDOUT) －1 默认输出到终端窗口 </p>
<p>​    标准错误(STDERR)  －2 默认输出到终端窗口 </p>
<p>I/O重定向:改变默认位置 </p>
<h3 id="把-I-O-重定向至文件"><a href="#把-I-O-重定向至文件" class="headerlink" title="把 I/O 重定向至文件"></a>把 I/O 重定向至文件</h3><hr>
<h4 id="把输出和错误重新定向到文件"><a href="#把输出和错误重新定向到文件" class="headerlink" title="把输出和错误重新定向到文件"></a>把输出和错误重新定向到文件</h4><p>STDOUT和STDERR可以被重定向到文件 </p>
<p>​    命令 操作符号 文件名 </p>
<p>支持的操作符号包括: </p>
<p>​    &gt;       把STDOUT重定向到文件 </p>
<p>​    2&gt;     把STDERR重定向到文件 </p>
<p>​    &amp;&gt;     把所有输出重定向到文件 </p>
<p>&gt;文件内容会被覆盖 </p>
<p>​    set –C 禁止将内容覆盖已有文件,但可追加 </p>
<p>​    &gt;| file 强制覆盖 </p>
<p>​    set +C 允许覆盖 </p>
<p>&gt;&gt;原有内容基础上，追加内容 </p>
<p>​    2&gt; 覆盖重定向错误输出数据流 </p>
<p>​    2&gt;&gt; 追加重定向错误输出数据流 </p>
<p>标准输出和错误输出各自定向至不同位置 </p>
<p>​    COMMAND &gt; /path/to/file.out 2&gt; /path/to/error.out </p>
<p>合并标准输出和错误输出为同一个数据流进行重定向 </p>
<p>​     &amp;&gt; 覆盖重定向 </p>
<p>​     &amp;&gt;&gt; 追加重定向 </p>
<p>​    COMMAND &gt; /path/to/file.out 2&gt;&amp;1 (顺序很重要) </p>
<p>​    COMMAND &gt;&gt; /path/to/file.out 2&gt;&amp;1 </p>
<p> ():合并多个程序的STDOUT </p>
<p>​    ( cal 2007 ; cal 2008 ) &gt; all.txt </p>
<h4 id="tr命令"><a href="#tr命令" class="headerlink" title="tr命令"></a>tr命令</h4><p>tr 转换和删除字符 tr [OPTION]… SET1 [SET2] </p>
<p>选项: </p>
<p>​    -c –C –complement:取字符集的补集 </p>
<p>​    -d –delete:删除所有属于第一字符集的字符 </p>
<p>​    -s –squeeze-repeats:把连续重复的字符以单独一个字符表示</p>
<p>​     -t –truncate-set1:将第一个字符集对应字符转化为第二字符集对应的字符</p>
<p>​    [:alnum:]:字母和数字 </p>
<p>​    [:alpha:]:字母 </p>
<p>​    [:cntrl:]:控制(非打印)字符 </p>
<p>​    [:digit:]: 数字 </p>
<p>​    [:graph:]:图形字符 </p>
<p>​    [:lower:]:小写字母 </p>
<p>​    [:print:]:可打印字符 </p>
<p>​    [:punct:]: 标点符号 </p>
<p>​    [:space:]:空白字符 </p>
<p>​    [:upper:]:大写字母 </p>
<p>​    [:xdigit:]:十六进制字符 </p>
<h3 id="使用管道"><a href="#使用管道" class="headerlink" title="使用管道"></a>使用管道</h3><hr>
<h4 id="从文件中导入STDIN"><a href="#从文件中导入STDIN" class="headerlink" title="从文件中导入STDIN"></a>从文件中导入STDIN</h4><p>使用&lt;来重定向标准输入 </p>
<p>某些命令能够接受从文件中导入的STDIN </p>
<p>​    tr ‘a-z’ ‘A-Z’&lt; /etc/issue </p>
<p>该命令会把/etc/issue中的小写字符都转换成写写字符 </p>
<p>tr –d abc &lt; /etc/fstab 删除fstab文件中的所有abc中任意字符 </p>
<p>cat &gt; file </p>
<p>​    google </p>
<p>​    mark</p>
<p>​    按ctrl+d离开，可以使用文件来代替键盘的输入 </p>
<p>cat &gt; filea &lt; fileb </p>
<h4 id="把多行发送给STDIN"><a href="#把多行发送给STDIN" class="headerlink" title="把多行发送给STDIN"></a>把多行发送给STDIN</h4><p>使用“&lt;&lt;终止词”命令从键盘把多行重导向给STDIN<br>直到 终止词 位置的所有文本都发送给STDIN<br>有时被称为就地文本(heretext)<br>mail -s “Please Call” <a href="mailto:admin@google.com">admin@google.com</a> &lt;&lt; END </p>
<p>&gt;Hi Mark,</p>
<p>&gt;Please give me a call when you get in. We may need</p>
<p>&gt; to do some maintenance on server1.</p>
<p>&gt;Details when you’re on-site</p>
<p>&gt;Zhang</p>
<p>&gt;END</p>
<h4 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h4><p>管道(使用符号“|”表示)用来连接命令 </p>
<p>命令1 | 命令2 | 命令3 | … </p>
<p>将命令1的STDOUT发送给命令2的STDIN，命令2的STDOUT发送到命令3的 STDIN             </p>
<p>STDERR默认不能通过管道转发，可利用2&gt;&amp;1 或 |&amp; 实现 </p>
<p>最后一个命令会在当前shell进程的子shell进程中执行用来组合多种工具的功能 </p>
<p><code>ls | tr ‘a-z’ ‘A-Z</code></p>
<p>less :一页一页地查看输入</p>
<p><code>ls -l /etc | less</code></p>
<p>mail: 通过电子邮件发送输入 </p>
<p><code>echo &quot;test email&quot; | mail -s &quot;test&quot; user@example.com</code></p>
<p>lpr:把输入发送给打印机 </p>
<p><code>echo &quot;test print&quot; | lpr -P printer_name</code></p>
<h4 id="管道中的-符号"><a href="#管道中的-符号" class="headerlink" title="管道中的 - 符号"></a>管道中的 - 符号</h4><p>示例: </p>
<p>将 /home 里面的文件打包，但打包的数据不是记录到文件，而是传送到 stdout， 经过管道后，将 tar -cvf - /home 传送给后面的 tar -xvf - , 后面的这个 - 则是取 前一个命令的 stdout， 因此，就不需要使用临时file了 </p>
<p><code>tar -cvf - /home | tar -xvf -</code></p>
<h4 id="重定向到多个目标-tee"><a href="#重定向到多个目标-tee" class="headerlink" title="重定向到多个目标(tee)"></a>重定向到多个目标(tee)</h4><p>命令1 | tee [-a ] 文件名 | 命令2 </p>
<p>​    把命令1的STDOUT保存在文件中，做为命令2的输入 </p>
<p>​    -a 追加 </p>
<p>使用: </p>
<p>​    保存不同阶段的输出 </p>
<p>​    复杂管道的故障排除 </p>
<p>​    同时查看和记录输出 </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Linux-%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E5%8F%8A%E5%B1%9E%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mark_avatar.png">
      <meta itemprop="name" content="Mark">
      <meta itemprop="description" content="半吊子民工 英特纳雄耐尔就一定要实现">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mark blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Linux-%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E5%8F%8A%E5%B1%9E%E6%80%A7/" class="post-title-link" itemprop="url">Linux 文件权限及属性</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-23 20:05:04" itemprop="dateCreated datePublished" datetime="2015-07-23T20:05:04+08:00">2015-07-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-01-02 23:31:39" itemprop="dateModified" datetime="2019-01-02T23:31:39+08:00">2019-01-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E6%B5%B7%E6%8B%BE%E8%B4%9D/" itemprop="url" rel="index"><span itemprop="name">学海拾贝</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="文件属性操作"><a href="#文件属性操作" class="headerlink" title="文件属性操作"></a>文件属性操作</h4><p>​    chown 设置文件的所有者 </p>
<p>​    chgrp 设置文件的属组信息 </p>
<h4 id="修改文件的主属性和属组"><a href="#修改文件的主属性和属组" class="headerlink" title="修改文件的主属性和属组"></a>修改文件的主属性和属组</h4><p>修改文件的属主:chown </p>
<pre><code>chown [OPTION]... \[OWNER][:[GROUP]] FILE... </code></pre><p>用法: </p>
<p>​    OWNER </p>
<p>​    OWNER:GROUP </p>
<p>​    :GROUP </p>
<p>​    命令中的冒号可用.替换 </p>
<p>​    -R: 递归 </p>
<p>​    chown [OPTION]… –reference=RFILE FILE…     </p>
<p>修改文件的属组:chgrp </p>
<p>​    chgrp [OPTION]… GROUP FILE… </p>
<p>​    chgrp [OPTION]… –reference=RFILE FILE… </p>
<p>​    -R 递归 </p>
<h4 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h4><p>文件的权限主要针对三类对象进行定义 </p>
<p>​    owner: 属主, u </p>
<p>​    group: 属组, g </p>
<p>​    other: 其他, o </p>
<p>每个文件针对每类访问者都定义了三种权限 </p>
<p>​    r: Readable </p>
<p>​    w: Writable </p>
<p>​    x: eXcutable     </p>
<p>文件:</p>
<p>​    r: 可使用文件查看类工具获取其内容 </p>
<p>​    w: 可修改其内容 </p>
<p>​    x: 可以把此文件提请内核启动为一个进程     </p>
<p>目录: </p>
<p>​    r: 可以使用ls查看此目录中文件列表 </p>
<p>​    w: 可在此目录中创建文件,也可删除此目录中的文件 </p>
<p>​    x: 可以使用ls -l查看此目录中文件元数据(须配合r),可以cd进入此目录 </p>
<p>​    X:只给目录x权限,不给文件x权限 </p>
<h4 id="文件权限操作"><a href="#文件权限操作" class="headerlink" title="文件权限操作"></a>文件权限操作</h4><p>文件权限操作命令:chmod </p>
<p>文件权限(rwx|X) </p>
<h4 id="八进制数字"><a href="#八进制数字" class="headerlink" title="八进制数字"></a>八进制数字</h4><p>—     000 0 </p>
<p>–x     001 1 </p>
<p>-w-     010 2 </p>
<p>-wx     011 3 </p>
<p>r–     100 4 </p>
<p>r-x     101 5 </p>
<p>rw-     110 6 </p>
<p>rwx    111 7 </p>
<p>例如: </p>
<pre><code>640: rw-r----- 

755: rwxr-xr-x </code></pre><h4 id="修改文件权限"><a href="#修改文件权限" class="headerlink" title="修改文件权限"></a>修改文件权限</h4><p>chmod [OPTION]… OCTAL-MODE FILE… </p>
<p>​    -R: 递归修改权限 </p>
<p>chmod [OPTION]… MODE[,MODE]… FILE… </p>
<p>MODE: </p>
<p>修改一类用户的所有权限: </p>
<p>​    u= g= o= ug= a= u=,g= </p>
<p>修改一类用户某位或某些位权限 </p>
<p>​    u+ u- g+ g- o+ o- a+ a- + - </p>
<p>chmod [OPTION]… –reference=RFILE FILE… </p>
<p>​    参考RFILE文件的权限,将FILE的修改为同RFILE </p>
<h4 id="权限设置示例"><a href="#权限设置示例" class="headerlink" title="权限设置示例"></a>权限设置示例</h4><p>chgrp sales testfile </p>
<p>chown root:admins testfile </p>
<p>chmod u+wx,g-r,o=rx file </p>
<p>chmod -R g+rwX /testdir </p>
<p>chmod 600 file </p>
<p>chown mark testfile </p>
<h4 id="新建文件和目录的默认权限"><a href="#新建文件和目录的默认权限" class="headerlink" title="新建文件和目录的默认权限"></a>新建文件和目录的默认权限</h4><p>umask值 可以用来保留在创建文件权限 </p>
<p>新建FILE权限: 666-umask </p>
<p>​    如果所得结果某位存在执行(奇数)权限,则将其权限+1 </p>
<p>新建DIR权限: 777-umask </p>
<p>非特权用户umask是 002 </p>
<p>root的umask 是 022 </p>
<p>umask: 查看 </p>
<p>umask #: 设定 </p>
<p>​    umask 002 </p>
<p>​    umask –S 模式方式显示 </p>
<p>​    umask –p 输出可被调用     </p>
<p>全局设置: /etc/bashrc 用户设置:~/.bashrc </p>
<h4 id="Linux文件系统上的特殊权限"><a href="#Linux文件系统上的特殊权限" class="headerlink" title="Linux文件系统上的特殊权限"></a>Linux文件系统上的特殊权限</h4><p>SUID, SGID, Sticky </p>
<p>三种常用权限:r, w, x user, group, other </p>
<p>安全上下文 </p>
<p>前提:进程有属主和属组；文件有属主和属组 </p>
<p>(1) 任何一个可执行程序文件能不能启动为进程,取决发起者对程序文件是否拥有 执行权限 </p>
<p>(2) 启动为进程之后,其进程的属主为发起者,进程的属组为发起者所属的组 </p>
<p>(3) 进程访问文件时的权限,取决于进程的发起者 </p>
<p>​    (a) 进程的发起者,同文件的属主:则应用文件属主权限 </p>
<p>​    (b) 进程的发起者,属于文件属组；则应用文件属组权限 </p>
<p>​    (c) 应用文件“其它”权限     </p>
<h4 id="可执行文件上的SUID权限"><a href="#可执行文件上的SUID权限" class="headerlink" title="可执行文件上的SUID权限"></a>可执行文件上的SUID权限</h4><p>任何一个可执行程序文件能不能启动为进程:取决发起者对程序文件是否拥有 执行权限 </p>
<p>启动为进程之后,其进程的属主为原程序文件的属主 </p>
<p>SUID只对二进制可执行程序有效 </p>
<p>SUID设置在目录上无意义 </p>
<p>权限设定: </p>
<p>​    chmod u+s FILE… </p>
<p>​    chmod u-s FILE… </p>
<p>​    SUID使用数字表示法可以用 4 来表示.</p>
<h4 id="可执行文件上SGID权限"><a href="#可执行文件上SGID权限" class="headerlink" title="可执行文件上SGID权限"></a>可执行文件上SGID权限</h4><p>任何一个可执行程序文件能不能启动为进程,取决发起者对程序文件是否拥有 执行权限 </p>
<p>启动为进程之后,其进程的属组为原程序文件的属组 </p>
<p>权限设定: </p>
<p>​    chmod g+s FILE… </p>
<p>​    chmod g-s FILE… </p>
<h4 id="目录上的SGID权限"><a href="#目录上的SGID权限" class="headerlink" title="目录上的SGID权限"></a>目录上的SGID权限</h4><p>默认情况下,用户创建文件时,其属组为此用户所属的主组 </p>
<p>一旦某目录被设定了SGID,则对此目录有写权限的用户在此目录中创建的文件 所属的组为此目录的属组 </p>
<p>通常用于创建一个协作目录 </p>
<p>权限设定: </p>
<p>​    chmod g+s DIR… </p>
<p>​    chmod g-s DIR…     </p>
<p>​    SGID使用数字表示法可以用 2 来表示.</p>
<h4 id="Sticky位"><a href="#Sticky位" class="headerlink" title="Sticky位"></a>Sticky位</h4><p>具有写权限的目录通常用户可以删除该目录中的任何文件,无论该文件的权限 或拥有权 </p>
<p>在目录设置Sticky 位,只有文件的所有者或root可以删除该文件 </p>
<p>sticky 设置在文件上无意义 </p>
<p>权限设定: </p>
<p>​    chmod o+t DIR… </p>
<p>​    chmod o-t DIR…     </p>
<p>​    Sticky使用数字表示发可以用 1 来表示.</p>
<p>例如: </p>
<p>​    ls -ld /tmp drwxrwxrwt 12 root root 4096 Nov 2 15:44 /tmp </p>
<h4 id="特殊权限数字法"><a href="#特殊权限数字法" class="headerlink" title="特殊权限数字法"></a>特殊权限数字法</h4><p>SUID SGID STICKY </p>
<p>000 0 </p>
<p>001 1 </p>
<p>010 2 </p>
<p>011 3 </p>
<p>100 4 </p>
<p>101 5 </p>
<p>110 6 </p>
<p>111 7 </p>
<p>chmod 4777 /tmp/a.txt </p>
<h4 id="权限位映射"><a href="#权限位映射" class="headerlink" title="权限位映射"></a>权限位映射</h4><p>SUID: user,占据属主的执行权限位 </p>
<p>​    s: 属主拥有x权限 </p>
<p>​    S: 属主没有x权限     </p>
<p>SGID: group,占据属组的执行权限位 </p>
<pre><code>s: group拥有x权限 </code></pre><p>​    S: group没有x权限 </p>
<p>Sticky: other,占据other的执行权限位 </p>
<p>​    t: other拥有x权限 </p>
<p>​    T: other没有x权限     </p>
<p><strong>特殊权限</strong></p>
<p>suid (4) : 作用于二进制程序,功能: 当用户执行此程序的时,将继承此文件所有者的权限</p>
<p>sgid (2) : 作用于二进制程序,功能: 当用户执行此程序的时,将继承此文件所有组的权限</p>
<pre><code>作用于目录上,功能:当用户在目录新建文件时,新文件的所属组自动继承此目录的所属组</code></pre><p>sticky (1) : 作用于目录上,功能: 此目录中的文件,只能被所有者自己删除</p>
<h4 id="设定文件特定属性"><a href="#设定文件特定属性" class="headerlink" title="设定文件特定属性"></a>设定文件特定属性</h4><p>chattr +i 不能删除,改名,更改 </p>
<p>chattr +a 只能追加内容 </p>
<p>lsattr 显示特定属性 </p>
<h4 id="访问控制列表"><a href="#访问控制列表" class="headerlink" title="访问控制列表"></a>访问控制列表</h4><p>ACL:Access Control List,实现灵活的权限管理 </p>
<p>除了文件的所有者,所属组和其它人,可以对更多的用户设置权限 </p>
<p>CentOS7 默认创建的xfs和ext4文件系统具有ACL功能 </p>
<p>CentOS7 之前版本,默认手工创建的ext4文件系统无ACL功能,需手动增加 </p>
<pre><code>tune2fs –o acl /dev/sdb1 

mount –o acl /dev/sdb1 /mnt/test </code></pre><p>ACL生效顺序:所有者,自定义用户,自定义组,其他人 </p>
<p>为多用户或者组的文件和目录赋予访问权限rwx </p>
<p>• mount -o acl /directory </p>
<p>• getfacl file |directory </p>
<p>• setfacl -m u:mark:rwx file|directory </p>
<p>• setfacl -Rm g:sales:rwX directory </p>
<p>• setfacl -M file.acl file|directory </p>
<p>• setfacl -m g:salesgroup:rw file| directory </p>
<p>• setfacl -m d:u:mark:rx directory </p>
<p>• setfacl -x u:mark file |directory </p>
<p>• setfacl -X file.acl directory </p>
<p>ACL文件上的group权限是mask 值(自定义用户,自定义组,拥有组的最大权 限),而非传统的组权限 </p>
<p>getfacl 可看到特殊权限:flags </p>
<p>通过ACL赋予目录默认x权限,目录内文件也不会继承x权限 </p>
<p>base ACL 不能删除 </p>
<p>setfacl -k dir 删除默认ACL权限 </p>
<p>setfacl –b file1清除所有ACL权限 </p>
<p>getfacl file1 | setfacl –set-file=- file2 复制file1的acl权限给file2 </p>
<p>mask只影响除所有者和other的之外的人和组的最大权限 </p>
<p>Mask需要与用户的权限进行逻辑与运算后,才能变成有限的权限(Effective Permission) </p>
<p>用户或组的设置必须存在于mask权限设定范围内才会生效 </p>
<pre><code>setfacl -m mask::rx file </code></pre><p>–set选项会把原有的ACL项都删除,用新的替代,需要注意的是一定要包含 UGO的设置,不能象-m一样只是添加ACL就可以 </p>
<p>示例: </p>
<pre><code>setfacl --set u::rw,u:mark:rw,g::r,o::- file1 </code></pre><p>备份和恢复ACL </p>
<p>主要的文件操作命令cp和mv都支持ACL,只是cp命令需要加上-p 参数。但是 tar等常见的备份工具是不会保留目录和文件的ACL信息 </p>
<pre><code>getfacl -R /tmp/dir1 &gt; acl.txt 

setfacl -R -b /tmp/dir1 

setfacl -R --set-file=acl.txt  /tmp/dir1 

setfacl --restore acl.txt 

getfacl -R /tmp/dir1 </code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Linux-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mark_avatar.png">
      <meta itemprop="name" content="Mark">
      <meta itemprop="description" content="半吊子民工 英特纳雄耐尔就一定要实现">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mark blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Linux-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" class="post-title-link" itemprop="url">Linux 文件管理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-22 19:30:58" itemprop="dateCreated datePublished" datetime="2015-07-22T19:30:58+08:00">2015-07-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-01-02 23:24:43" itemprop="dateModified" datetime="2019-01-02T23:24:43+08:00">2019-01-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E6%B5%B7%E6%8B%BE%E8%B4%9D/" itemprop="url" rel="index"><span itemprop="name">学海拾贝</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="文件系统结构元素"><a href="#文件系统结构元素" class="headerlink" title="文件系统结构元素"></a>文件系统结构元素</h3><p>文件和目录被组织成一个单根倒置树结构 </p>
<p>文件系统从根目录下开始,用“/”表示 </p>
<p>根文件系统(rootfs):root filesystem </p>
<p>文件名称<strong>区分大小写</strong> </p>
<p>以.开头的文件为隐藏文件 </p>
<p>路径分隔的 / 文件有两类数据: </p>
<p>​    元数据:metadata </p>
<p>​    数据:data </p>
<p>文件系统分层结构:LSB Linux Standard Base </p>
<p>FHS: (Filesystem Hierarchy Standard) <a href="http://www.pathname.com/fhs/" target="_blank" rel="noopener">http://www.pathname.com/fhs/</a> </p>
<h4 id="文件名规则"><a href="#文件名规则" class="headerlink" title="文件名规则"></a>文件名规则</h4><p>文件名最长255个字节 </p>
<p>包括路径在内文件名称最长4095个字节 </p>
<p>蓝色–&gt;目录 绿色–&gt;可执行文件 红色–&gt;压缩文件 浅蓝色–&gt;链接文 件 灰色–&gt;其他文件 </p>
<p>除了斜杠和NUL,所有字符都有效.但使用特殊字符的目录名和文件不推荐使用, 有些字符需要用引号来引用它们。 </p>
<p>标准Linux文件系统(如ext4),文件名称大小写敏感。例如: MAIL, Mail, mail, mAiL </p>
<h4 id="文件系统结构"><a href="#文件系统结构" class="headerlink" title="文件系统结构"></a>文件系统结构</h4><p>/boot:引导文件存放目录,内核文件(vmlinuz)、引导加载器(bootloader, grub)都存放于此目录    /bin:供所有用户使用的基本命令；不能关联至独立分区,OS启动即会用到的 程序 </p>
<p>/sbin:管理类的基本命令；不能关联至独立分区,OS启动即会用到的程序 </p>
<p>/lib:启动时程序依赖的基本共享库文件以及内核模块文件(/lib/modules) </p>
<p>/lib64:专用于x86_64系统上的辅助共享库文件存放位置 </p>
<p>/etc:配置文件目录 </p>
<p>/home/USERNAME:普通用户家目录 </p>
<p>/root:管理员的家目录 </p>
<p>/media:便携式移动设备挂载点</p>
<h4 id="文件系统结构-1"><a href="#文件系统结构-1" class="headerlink" title="文件系统结构"></a>文件系统结构</h4><p>/mnt:临时文件系统挂载点 </p>
<p>/dev:设备文件及特殊文件存储位置 </p>
<p>​    b: block device,随机访问 </p>
<p>​    c: character device,线性访问 </p>
<p>/opt:第三方应用程序的安装位置 </p>
<p>/srv:系统上运行的服务用到的数据 </p>
<p>/tmp:临时文件存储位置 </p>
<h4 id="文件系统结构-2"><a href="#文件系统结构-2" class="headerlink" title="文件系统结构"></a>文件系统结构</h4><p>/usr: universal shared, read-only data </p>
<p>​    bin: 保证系统拥有完整功能而提供的应用程序 </p>
<p>​    sbin: lib:32位使用 </p>
<p>​    lib64:只存在64位系统 </p>
<p>​    include: C程序的头文件(header files) </p>
<p>​    share:结构化独立的数据,例如doc, man等 </p>
<p>​    local:第三方应用程序的安装位置 </p>
<p>​    bin, sbin, lib, lib64, etc, share </p>
<p>/var: variable data files </p>
<p>​    cache: 应用程序缓存数据目录 </p>
<p>​    lib: 应用程序状态信息数据 </p>
<p>​    local:专用于为/usr/local下的应用程序存储可变数据； </p>
<p>​    lock: 锁文件 </p>
<p>​    log: 日志目录及文件 </p>
<p>​    opt: 专用于为/opt下的应用程序存储可变数据； </p>
<p>​    run: 运行中的进程相关数据,通常用于存储进程pid文件 </p>
<p>​    spool: 应用程序数据池 </p>
<p>​    tmp: 保存系统两次重启之间产生的临时数据 </p>
<p>/proc: 用于输出内核与进程信息相关的虚拟文件系统 </p>
<p>/sys:用于输出当前系统上硬件设备相关信息虚拟文件系统 </p>
<p>/selinux: security enhanced Linux,selinux相关的安全策略等信息的存储位置 </p>
<h4 id="Linux上应用程序的组成部分"><a href="#Linux上应用程序的组成部分" class="headerlink" title="Linux上应用程序的组成部分"></a>Linux上应用程序的组成部分</h4><p>二进制程序:/bin, /sbin, /usr/bin, /usr/sbin, /usr/local/bin, /usr/local/sbin </p>
<p>库文件:/lib, /lib64, /usr/lib, /usr/lib64, /usr/local/lib, /usr/local/lib64 </p>
<p>配置文件:/etc, /etc/DIRECTORY, /usr/local/etc </p>
<p>帮助文件:/usr/share/man, /usr/share/doc, /usr/local/share/man, /usr/local/share/doc </p>
<h4 id="Linux下的文件类型"><a href="#Linux下的文件类型" class="headerlink" title="Linux下的文件类型"></a>Linux下的文件类型</h4><p>   -:普通文件 </p>
<p>   d: 目录文件 </p>
<p>   b: 块设备 </p>
<p>   c: 字符设备 </p>
<p>   l: 符号链接文件 </p>
<p>   p: 管道文件pipe </p>
<p>   s: 套接字文件socket </p>
<h4 id="CentOS-7-目录变化"><a href="#CentOS-7-目录变化" class="headerlink" title="CentOS 7 目录变化"></a>CentOS 7 目录变化</h4><p>   /bin 和 /usr/bin </p>
<p>   /sbin 和 /usr/sbin </p>
<p>   /lib 和/usr/lib </p>
<p>   /lib64 和 /usr/lib64  </p>
<h4 id="显示当前工作目录"><a href="#显示当前工作目录" class="headerlink" title="显示当前工作目录"></a>显示当前工作目录</h4><p>   每个shell和系统进程都有一个当前的工作目录 </p>
<p>   CWD:current work directory </p>
<p>   显示当前shell CWD的绝对路径 </p>
<p>pwd: printing working directory </p>
<p>​    -P 显示真实物理路径 </p>
<p>​    -L 显示链接路径(默认)</p>
<h4 id="相对路径和绝对路径"><a href="#相对路径和绝对路径" class="headerlink" title="相对路径和绝对路径"></a>相对路径和绝对路径</h4><p>​    绝对路径 </p>
<p>​    / 以正斜杠开始 </p>
<p>​    可以用于完整的文件的位置路径 </p>
<p>​    可用于任何想指定一个文件名的时候 </p>
<p>   相对路径名 </p>
<p>​    不以斜线开始 </p>
<p>​    指定相对于当前工作目录或某目录的位置 </p>
<p>​    可以作为一个简短的形式指定一个文件名 </p>
<p>   基名:basename </p>
<p>   目录名:dirname </p>
<h4 id="更改目录"><a href="#更改目录" class="headerlink" title="更改目录"></a>更改目录</h4><p>   cd 改变目录 </p>
<p>使用绝对或相对路径: </p>
<p>​    cd /home/mark/ </p>
<p>​    cd home/mark </p>
<p>切换至父目录: cd .. </p>
<p>切换至当前用户主目录: cd </p>
<p>切换至以前的工作目录: cd - </p>
<p>   选项:-P </p>
<p>   相关的环境变量: </p>
<p>​    PWD:当前目录路径 </p>
<p>​    OLDPWD:上一次目录路径 </p>
<h4 id="列出目录内容"><a href="#列出目录内容" class="headerlink" title="列出目录内容"></a>列出目录内容</h4><p>   列出当前目录的内容或指定目录 </p>
<p>   用法:ls [options][files_or_dirs] </p>
<p>   示例: </p>
<p>​    ls -a 包含隐藏文件 </p>
<p>​    ls -l 显示额外的信息 </p>
<p>​    ls -R 目录递归通过 </p>
<p>​    ls -ld 目录和符号链接信息 </p>
<p>​    ls -1 文件分行显示 </p>
<p>​    ls –S 按从大到小排序 </p>
<p>​    ls –t 按mtime排序 </p>
<p>​    ls –u 配合-t选项,显示并按atime从新到旧排序 </p>
<p>​    ls –U 按目录存放顺序显示 </p>
<p>​    ls –X 按文件后缀排序 </p>
<h4 id="查看文件状态"><a href="#查看文件状态" class="headerlink" title="查看文件状态"></a>查看文件状态</h4><p>   stat </p>
<p>   文件:metadata, data </p>
<p>   三个时间戳: </p>
<p>​    access time:访问时间,atime,读取文件内容 </p>
<p>​    modify time: 修改时间, mtime,改变文件内容(数据) </p>
<p>​    change time: 改变时间, ctime,元数据发生改变 </p>
<h4 id="文件通配符"><a href="#文件通配符" class="headerlink" title="文件通配符"></a>文件通配符</h4><p>*<em>匹配零个或多个字符 *</em></p>
<p>? : 匹配任何单个字符 </p>
<p>~ : 当前用户家目录 </p>
<p>​    ~mark 用户mark家目录 </p>
<p>~+ : 当前工作目录 </p>
<p>~- : 前一个工作目录 </p>
<p>[0-9] 匹配数字范围 </p>
<p>[a-z]:字母</p>
<p>[A-Z]:字母</p>
<p>[mark] 匹配列表中的任何的一个字符 </p>
<p>[^mark] 匹配列表中的所有字符以外的字符 </p>
<p>预定义的字符类:man 7 glob</p>
<p>[:digit:]:任意数字,相当于0-9</p>
<p>[:lower:]:任意小写字母</p>
<p>[:upper:]: 任意大写字母 </p>
<p>[:alpha:]: 任意大小写字母 </p>
<p>[:alnum:]:任意数字或字母</p>
<p>[:blank:]:水平空白字符</p>
<p>[:space:]:水平或垂直空白字符</p>
<p>[:punct:]:标点符号</p>
<p>[:print:]:可打印字符</p>
<p>[:cntrl:]:控制(非打印)字符</p>
<p>[:graph:]:图形字符</p>
<p>[:xdigit:]:十六进制字符</p>
<h4 id="创建空文件和刷新时间"><a href="#创建空文件和刷新时间" class="headerlink" title="创建空文件和刷新时间"></a>创建空文件和刷新时间</h4><p>   touch命令: </p>
<p>​   touch [OPTION]… FILE… </p>
<p>​    -a 仅改变 atime和ctime </p>
<p>​    -m 仅改变 mtime和ctime </p>
<p>​    -t [[CC]YY]MMDDhhmm[.ss] 指定atime和mtime的时间戳 </p>
<p>​        touch -t 200909010059.30 marktest.sh  //#将文件时间属性改为9月1号0点59分30秒         </p>
<p>​    -c 如果文件不存在,则不予创建</p>
<h3 id="复制转移和删除文件"><a href="#复制转移和删除文件" class="headerlink" title="复制转移和删除文件"></a>复制转移和删除文件</h3><h4 id="复制文件和目录-CP"><a href="#复制文件和目录-CP" class="headerlink" title="复制文件和目录 CP"></a>复制文件和目录 CP</h4><p>   cp [OPTION]… [-T] SOURCE DEST </p>
<p>   cp [OPTION]… SOURCE… DIRECTORY </p>
<p>   cp [OPTION]… -t DIRECTORY SOURCE… </p>
<p>   cp SRC DEST </p>
<p>SRC是文件: </p>
<p>​    如果目标不存在:新建DEST,并将SRC中内容填充至DEST中 </p>
<p>​    如果目标存在: </p>
<p>​        如果DEST是文件:将SRC中的内容覆盖至DEST中 </p>
<p>​            基于安全,建议为cp命令使用-i选项 </p>
<p>​        如果DEST是目录:在DEST下新建与原文件同名的文件,并将SRC中内容填 充至新文件中 </p>
<pre><code>cp SRC... DEST </code></pre><p>SRC…:多个文件 </p>
<p>​    DEST必须存在,且为目录,其它情形均会出错； </p>
<pre><code>cp SRC DEST </code></pre><p>​    SRC是目录:此时使用选项:-r </p>
<p>​        如果DEST不存在:则创建指定目录,复制SRC目录中所有文件至DEST中； </p>
<p>​        如果DEST存在: </p>
<p>​            如果DEST是文件:报错 </p>
<p>​            如果DEST是目录: </p>
<table>
<thead>
<tr>
<th>源\目标</th>
<th>不存在</th>
<th>存在且为文件</th>
<th>存在且为目录</th>
</tr>
</thead>
<tbody><tr>
<td>一个文件</td>
<td>新建DEST,并将SRC中内容填充至DEST中</td>
<td>将SRC中的内容覆盖至DEST中,存在数据丢失的风险,要加 -i</td>
<td>在DEST下新建与原文件同名的文件,并将SRC中内容填充至新文件中</td>
</tr>
<tr>
<td>多个文件</td>
<td><strong>提示错误</strong></td>
<td><strong>提示错误</strong></td>
<td>在DEST下新建与源文件同名的文件,并将源文件内容复制进新文件中</td>
</tr>
<tr>
<td>目录要用 -r 选项</td>
<td>创建指定DEST同名目录,复制SRC目录中所有文件至DEST下</td>
<td><strong>提示错误</strong></td>
<td>在DEST下新建与原 目录同名的目录， 并将SRC中内容复 制至新目录中</td>
</tr>
</tbody></table>
<h4 id="cp-常用选项"><a href="#cp-常用选项" class="headerlink" title="cp 常用选项"></a>cp 常用选项</h4><p>   -i:覆盖前提示 –n:不覆盖,注意两者顺序 </p>
<p>   -r, -R: 递归复制目录及内部的所有内容 </p>
<p>   -a: 归档,相当于-dR –preserv=all </p>
<p>   -d:–no-dereference –preserv=links 不复制原文件,只复制链接名 </p>
<p>   –preserv[=ATTR_LIST] </p>
<p>​    mode: 权限 </p>
<p>​    ownership: 属主属组 </p>
<p>​    timestamp: </p>
<p>​    links </p>
<p>​    xattr </p>
<p>​    context </p>
<p>​    all </p>
<p>   -p: 等同–preserv=mode,ownership,timestamp </p>
<p>   -v: –verbose </p>
<p>   -f: –force </p>
<p>   -u:–update 只复制源比目标更新文件或目标不存在的文件 </p>
<p>   –backup=numbered 目标存在,覆盖前先备份加数字后缀 </p>
<h4 id="移动和重命名文件"><a href="#移动和重命名文件" class="headerlink" title="移动和重命名文件"></a>移动和重命名文件</h4><p>   mv [OPTION]… [-T] SOURCE DEST </p>
<p>   mv [OPTION]… SOURCE… DIRECTORY </p>
<p>   mv [OPTION]… -t DIRECTORY SOURCE… </p>
<p>​    常用选项: </p>
<p>​        -i: 交互式</p>
<p>​        -f: 强制 </p>
<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><p>   rm [OPTION]… FILE… </p>
<p>   常用选项: </p>
<p>​    -i 交互式 </p>
<p>​    -f 强制删除 </p>
<p>​    -r 递归 </p>
<p>​    –no-preserve-root 删除/ </p>
<p>   示例: rm -rf / </p>
<h4 id="目录操作"><a href="#目录操作" class="headerlink" title="目录操作"></a>目录操作</h4><p>   tree 显示目录树 </p>
<p>​    -d: 只显示目录 </p>
<p>​    -L level:指定显示的层级数目 </p>
<p>​    -P pattern: 只显示由指定pattern匹配到的路径 </p>
<p>   mkdir 创建目录 </p>
<p>​    -p: 存在于不报错,且可自动创建所需的各目录 </p>
<p>​    -v: 显示详细信息 </p>
<p>​    -m MODE: 创建目录时直接指定权限 </p>
<p>   rmdir 删除空目录 </p>
<p>​    -p: 递归删除父空目录 </p>
<p>​    -v: 显示详细信息 </p>
<p>   rm -r 递归删除目录树 </p>
<h3 id="索引节点"><a href="#索引节点" class="headerlink" title="索引节点"></a>索引节点</h3><p>​    inode(index node)表中包含文件系统所有文件列表 </p>
<p>   一个节点 (索引节点)是在一个表项,包含有关文件的信息( 元数据 ),包 括: </p>
<p>​    文件类型,权限,UID,GID </p>
<p>​    链接数(指向这个文件名路径名称个数) </p>
<p>​    该文件的大小和不同的时间戳 </p>
<p>​    指向磁盘上文件的数据块指针 </p>
<p>​    有关文件的其他数据 </p>
<p>详情查看<a href="http://www.ruanyifeng.com/blog/2011/12/inode.html" target="_blank" rel="noopener">inode表结构</a></p>
<h4 id="cp和inode"><a href="#cp和inode" class="headerlink" title="cp和inode"></a>cp和inode</h4><p>   在 CP的 命令: </p>
<p>​    分配一个空闲的inode号,在inode表中生成新条目 在目录中创建一个目录项,将名称与inode编号关联 拷贝数据生成新的文件 </p>
<h4 id="rm和inode"><a href="#rm和inode" class="headerlink" title="rm和inode"></a>rm和inode</h4><p>rm 命令: </p>
<p>​    链接数递减,从而释放的inode号可以被重用 </p>
<p>​    把数据块放在空闲列表中 </p>
<p>​    删除目录项 </p>
<p>​    数据实际上不会马上被删除,但当另一个文件使用数据块时将被覆盖。</p>
<h4 id="mv和inode"><a href="#mv和inode" class="headerlink" title="mv和inode"></a>mv和inode</h4><p>​    如果mv命令的目标和源在相同的文件系统,作为mv 命令 </p>
<p>​    用新的文件名创建对应新的目录项 </p>
<p>​    删除旧目录条目对应的旧的文件名 </p>
<p>​    不影响inode表(除时间戳)或磁盘上的数据位置:没有数据被移动！ </p>
<p>   如果目标和源在一个不同的文件系统, mv相当于cp和rm </p>
<h3 id="硬链接"><a href="#硬链接" class="headerlink" title="硬链接"></a>硬链接</h3><p>   创建硬链接会增加额外的记录项以引用文件 </p>
<p>   对应于同一文件系统上一个物理文件 </p>
<p>   每个目录引用相同的inode号 </p>
<p>   创建时链接数递增 </p>
<p>   删除文件时,rm命令递减计数的链接 </p>
<p>   文件要存在,至少有一个链接数 </p>
<p>   当链接数为零时,该文件被删除 </p>
<p>   不能跨越驱动器或分区 </p>
<p>   语法: ln filename [linkname ] </p>
<h3 id="符号-软-链接"><a href="#符号-软-链接" class="headerlink" title="符号(软)链接"></a>符号(软)链接</h3><p>   一个符号链接指向另一个文件 </p>
<p>   ls - l的 显示链接的名称和引用的文件 </p>
<p>   一个符号链接的内容是它引用文件的名称 </p>
<p>   可以对目录进行 </p>
<p>   可以跨分区 </p>
<p>   指向的是另一个文件的路径；其大小为指向的路径字符串的长度；不增加或减 少目标文件inode的引用计数； </p>
<p>   语法: ln -s filename [linkname] </p>
<h3 id="确定文件内容"><a href="#确定文件内容" class="headerlink" title="确定文件内容"></a>确定文件内容</h3><p>文件可以包含多种类型的数据 </p>
<p>   检查文件的类型,然后确定适当的打开命令或应用程序使用 </p>
<p>   file [options] … </p>
<p>   常用选项: </p>
<p>​    -b 列出文件辨识结果时,不显示文件名称 </p>
<p>​    -f filelist 列出文件filelist中文件名的文件类型 </p>
<p>​    -F 使用指定分隔符号替换输出文件名后默认的”:”分隔符 </p>
<p>​    -L 查看对应软链接对应文件的文件类型 </p>
<p>​    –help 显示命令在线帮助 </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Mark"
      src="/images/mark_avatar.png">
  <p class="site-author-name" itemprop="name">Mark</p>
  <div class="site-description" itemprop="description">半吊子民工 英特纳雄耐尔就一定要实现</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">64</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:markupzh@gmail.com" title="E-Mail → mailto:markupzh@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2015 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mark</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
