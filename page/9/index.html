<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/M_32px.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/M_16px.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":7,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="半吊子民工 英特纳雄耐尔就一定要实现">
<meta property="og:type" content="website">
<meta property="og:title" content="Mark blog">
<meta property="og:url" content="http://yoursite.com/page/9/index.html">
<meta property="og:site_name" content="Mark blog">
<meta property="og:description" content="半吊子民工 英特纳雄耐尔就一定要实现">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Mark">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/9/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Mark blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Mark blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">知行合一 划水归档</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Linux-%E6%A0%87%E5%87%86IO%E5%92%8C%E7%AE%A1%E9%81%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mark_avatar.png">
      <meta itemprop="name" content="Mark">
      <meta itemprop="description" content="半吊子民工 英特纳雄耐尔就一定要实现">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mark blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Linux-%E6%A0%87%E5%87%86IO%E5%92%8C%E7%AE%A1%E9%81%93/" class="post-title-link" itemprop="url">Linux 标准IO和管道</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-30 19:55:44" itemprop="dateCreated datePublished" datetime="2015-07-30T19:55:44+08:00">2015-07-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-01-02 23:26:24" itemprop="dateModified" datetime="2019-01-02T23:26:24+08:00">2019-01-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E6%B5%B7%E6%8B%BE%E8%B4%9D/" itemprop="url" rel="index"><span itemprop="name">学海拾贝</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="标准输入和输出"><a href="#标准输入和输出" class="headerlink" title="标准输入和输出"></a>标准输入和输出</h3><p>程序:指令+数据 </p>
<p>​    读入数据:    Input </p>
<p>​    输出数据:    Output </p>
<p>打开的文件都有一个fd: file descriptor (文件描述符) </p>
<p>Linux给程序提供三种I/O设备 </p>
<p>​    标准输入(STDIN)     －0 默认接受来自键盘的输入 </p>
<p>​    标准输出(STDOUT) －1 默认输出到终端窗口 </p>
<p>​    标准错误(STDERR)  －2 默认输出到终端窗口 </p>
<p>I/O重定向:改变默认位置 </p>
<h3 id="把-I-O-重定向至文件"><a href="#把-I-O-重定向至文件" class="headerlink" title="把 I/O 重定向至文件"></a>把 I/O 重定向至文件</h3><hr>
<h4 id="把输出和错误重新定向到文件"><a href="#把输出和错误重新定向到文件" class="headerlink" title="把输出和错误重新定向到文件"></a>把输出和错误重新定向到文件</h4><p>STDOUT和STDERR可以被重定向到文件 </p>
<p>​    命令 操作符号 文件名 </p>
<p>支持的操作符号包括: </p>
<p>​    &gt;       把STDOUT重定向到文件 </p>
<p>​    2&gt;     把STDERR重定向到文件 </p>
<p>​    &amp;&gt;     把所有输出重定向到文件 </p>
<p>&gt;文件内容会被覆盖 </p>
<p>​    set –C 禁止将内容覆盖已有文件,但可追加 </p>
<p>​    &gt;| file 强制覆盖 </p>
<p>​    set +C 允许覆盖 </p>
<p>&gt;&gt;原有内容基础上，追加内容 </p>
<p>​    2&gt; 覆盖重定向错误输出数据流 </p>
<p>​    2&gt;&gt; 追加重定向错误输出数据流 </p>
<p>标准输出和错误输出各自定向至不同位置 </p>
<p>​    COMMAND &gt; /path/to/file.out 2&gt; /path/to/error.out </p>
<p>合并标准输出和错误输出为同一个数据流进行重定向 </p>
<p>​     &amp;&gt; 覆盖重定向 </p>
<p>​     &amp;&gt;&gt; 追加重定向 </p>
<p>​    COMMAND &gt; /path/to/file.out 2&gt;&amp;1 (顺序很重要) </p>
<p>​    COMMAND &gt;&gt; /path/to/file.out 2&gt;&amp;1 </p>
<p> ():合并多个程序的STDOUT </p>
<p>​    ( cal 2007 ; cal 2008 ) &gt; all.txt </p>
<h4 id="tr命令"><a href="#tr命令" class="headerlink" title="tr命令"></a>tr命令</h4><p>tr 转换和删除字符 tr [OPTION]… SET1 [SET2] </p>
<p>选项: </p>
<p>​    -c –C –complement:取字符集的补集 </p>
<p>​    -d –delete:删除所有属于第一字符集的字符 </p>
<p>​    -s –squeeze-repeats:把连续重复的字符以单独一个字符表示</p>
<p>​     -t –truncate-set1:将第一个字符集对应字符转化为第二字符集对应的字符</p>
<p>​    [:alnum:]:字母和数字 </p>
<p>​    [:alpha:]:字母 </p>
<p>​    [:cntrl:]:控制(非打印)字符 </p>
<p>​    [:digit:]: 数字 </p>
<p>​    [:graph:]:图形字符 </p>
<p>​    [:lower:]:小写字母 </p>
<p>​    [:print:]:可打印字符 </p>
<p>​    [:punct:]: 标点符号 </p>
<p>​    [:space:]:空白字符 </p>
<p>​    [:upper:]:大写字母 </p>
<p>​    [:xdigit:]:十六进制字符 </p>
<h3 id="使用管道"><a href="#使用管道" class="headerlink" title="使用管道"></a>使用管道</h3><hr>
<h4 id="从文件中导入STDIN"><a href="#从文件中导入STDIN" class="headerlink" title="从文件中导入STDIN"></a>从文件中导入STDIN</h4><p>使用&lt;来重定向标准输入 </p>
<p>某些命令能够接受从文件中导入的STDIN </p>
<p>​    tr ‘a-z’ ‘A-Z’&lt; /etc/issue </p>
<p>该命令会把/etc/issue中的小写字符都转换成写写字符 </p>
<p>tr –d abc &lt; /etc/fstab 删除fstab文件中的所有abc中任意字符 </p>
<p>cat &gt; file </p>
<p>​    google </p>
<p>​    mark</p>
<p>​    按ctrl+d离开，可以使用文件来代替键盘的输入 </p>
<p>cat &gt; filea &lt; fileb </p>
<h4 id="把多行发送给STDIN"><a href="#把多行发送给STDIN" class="headerlink" title="把多行发送给STDIN"></a>把多行发送给STDIN</h4><p>使用“&lt;&lt;终止词”命令从键盘把多行重导向给STDIN<br>直到 终止词 位置的所有文本都发送给STDIN<br>有时被称为就地文本(heretext)<br>mail -s “Please Call” <a href="mailto:admin@google.com">admin@google.com</a> &lt;&lt; END </p>
<p>&gt;Hi Mark,</p>
<p>&gt;Please give me a call when you get in. We may need</p>
<p>&gt; to do some maintenance on server1.</p>
<p>&gt;Details when you’re on-site</p>
<p>&gt;Zhang</p>
<p>&gt;END</p>
<h4 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h4><p>管道(使用符号“|”表示)用来连接命令 </p>
<p>命令1 | 命令2 | 命令3 | … </p>
<p>将命令1的STDOUT发送给命令2的STDIN，命令2的STDOUT发送到命令3的 STDIN             </p>
<p>STDERR默认不能通过管道转发，可利用2&gt;&amp;1 或 |&amp; 实现 </p>
<p>最后一个命令会在当前shell进程的子shell进程中执行用来组合多种工具的功能 </p>
<p><code>ls | tr ‘a-z’ ‘A-Z</code></p>
<p>less :一页一页地查看输入</p>
<p><code>ls -l /etc | less</code></p>
<p>mail: 通过电子邮件发送输入 </p>
<p><code>echo &quot;test email&quot; | mail -s &quot;test&quot; user@example.com</code></p>
<p>lpr:把输入发送给打印机 </p>
<p><code>echo &quot;test print&quot; | lpr -P printer_name</code></p>
<h4 id="管道中的-符号"><a href="#管道中的-符号" class="headerlink" title="管道中的 - 符号"></a>管道中的 - 符号</h4><p>示例: </p>
<p>将 /home 里面的文件打包，但打包的数据不是记录到文件，而是传送到 stdout， 经过管道后，将 tar -cvf - /home 传送给后面的 tar -xvf - , 后面的这个 - 则是取 前一个命令的 stdout， 因此，就不需要使用临时file了 </p>
<p><code>tar -cvf - /home | tar -xvf -</code></p>
<h4 id="重定向到多个目标-tee"><a href="#重定向到多个目标-tee" class="headerlink" title="重定向到多个目标(tee)"></a>重定向到多个目标(tee)</h4><p>命令1 | tee [-a ] 文件名 | 命令2 </p>
<p>​    把命令1的STDOUT保存在文件中，做为命令2的输入 </p>
<p>​    -a 追加 </p>
<p>使用: </p>
<p>​    保存不同阶段的输出 </p>
<p>​    复杂管道的故障排除 </p>
<p>​    同时查看和记录输出 </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Linux-%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E5%8F%8A%E5%B1%9E%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mark_avatar.png">
      <meta itemprop="name" content="Mark">
      <meta itemprop="description" content="半吊子民工 英特纳雄耐尔就一定要实现">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mark blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Linux-%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E5%8F%8A%E5%B1%9E%E6%80%A7/" class="post-title-link" itemprop="url">Linux 文件权限及属性</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-23 20:05:04" itemprop="dateCreated datePublished" datetime="2015-07-23T20:05:04+08:00">2015-07-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-01-02 23:31:39" itemprop="dateModified" datetime="2019-01-02T23:31:39+08:00">2019-01-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E6%B5%B7%E6%8B%BE%E8%B4%9D/" itemprop="url" rel="index"><span itemprop="name">学海拾贝</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="文件属性操作"><a href="#文件属性操作" class="headerlink" title="文件属性操作"></a>文件属性操作</h4><p>​    chown 设置文件的所有者 </p>
<p>​    chgrp 设置文件的属组信息 </p>
<h4 id="修改文件的主属性和属组"><a href="#修改文件的主属性和属组" class="headerlink" title="修改文件的主属性和属组"></a>修改文件的主属性和属组</h4><p>修改文件的属主:chown </p>
<pre><code>chown [OPTION]... \[OWNER][:[GROUP]] FILE... </code></pre><p>用法: </p>
<p>​    OWNER </p>
<p>​    OWNER:GROUP </p>
<p>​    :GROUP </p>
<p>​    命令中的冒号可用.替换 </p>
<p>​    -R: 递归 </p>
<p>​    chown [OPTION]… –reference=RFILE FILE…     </p>
<p>修改文件的属组:chgrp </p>
<p>​    chgrp [OPTION]… GROUP FILE… </p>
<p>​    chgrp [OPTION]… –reference=RFILE FILE… </p>
<p>​    -R 递归 </p>
<h4 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h4><p>文件的权限主要针对三类对象进行定义 </p>
<p>​    owner: 属主, u </p>
<p>​    group: 属组, g </p>
<p>​    other: 其他, o </p>
<p>每个文件针对每类访问者都定义了三种权限 </p>
<p>​    r: Readable </p>
<p>​    w: Writable </p>
<p>​    x: eXcutable     </p>
<p>文件:</p>
<p>​    r: 可使用文件查看类工具获取其内容 </p>
<p>​    w: 可修改其内容 </p>
<p>​    x: 可以把此文件提请内核启动为一个进程     </p>
<p>目录: </p>
<p>​    r: 可以使用ls查看此目录中文件列表 </p>
<p>​    w: 可在此目录中创建文件,也可删除此目录中的文件 </p>
<p>​    x: 可以使用ls -l查看此目录中文件元数据(须配合r),可以cd进入此目录 </p>
<p>​    X:只给目录x权限,不给文件x权限 </p>
<h4 id="文件权限操作"><a href="#文件权限操作" class="headerlink" title="文件权限操作"></a>文件权限操作</h4><p>文件权限操作命令:chmod </p>
<p>文件权限(rwx|X) </p>
<h4 id="八进制数字"><a href="#八进制数字" class="headerlink" title="八进制数字"></a>八进制数字</h4><p>—     000 0 </p>
<p>–x     001 1 </p>
<p>-w-     010 2 </p>
<p>-wx     011 3 </p>
<p>r–     100 4 </p>
<p>r-x     101 5 </p>
<p>rw-     110 6 </p>
<p>rwx    111 7 </p>
<p>例如: </p>
<pre><code>640: rw-r----- 

755: rwxr-xr-x </code></pre><h4 id="修改文件权限"><a href="#修改文件权限" class="headerlink" title="修改文件权限"></a>修改文件权限</h4><p>chmod [OPTION]… OCTAL-MODE FILE… </p>
<p>​    -R: 递归修改权限 </p>
<p>chmod [OPTION]… MODE[,MODE]… FILE… </p>
<p>MODE: </p>
<p>修改一类用户的所有权限: </p>
<p>​    u= g= o= ug= a= u=,g= </p>
<p>修改一类用户某位或某些位权限 </p>
<p>​    u+ u- g+ g- o+ o- a+ a- + - </p>
<p>chmod [OPTION]… –reference=RFILE FILE… </p>
<p>​    参考RFILE文件的权限,将FILE的修改为同RFILE </p>
<h4 id="权限设置示例"><a href="#权限设置示例" class="headerlink" title="权限设置示例"></a>权限设置示例</h4><p>chgrp sales testfile </p>
<p>chown root:admins testfile </p>
<p>chmod u+wx,g-r,o=rx file </p>
<p>chmod -R g+rwX /testdir </p>
<p>chmod 600 file </p>
<p>chown mark testfile </p>
<h4 id="新建文件和目录的默认权限"><a href="#新建文件和目录的默认权限" class="headerlink" title="新建文件和目录的默认权限"></a>新建文件和目录的默认权限</h4><p>umask值 可以用来保留在创建文件权限 </p>
<p>新建FILE权限: 666-umask </p>
<p>​    如果所得结果某位存在执行(奇数)权限,则将其权限+1 </p>
<p>新建DIR权限: 777-umask </p>
<p>非特权用户umask是 002 </p>
<p>root的umask 是 022 </p>
<p>umask: 查看 </p>
<p>umask #: 设定 </p>
<p>​    umask 002 </p>
<p>​    umask –S 模式方式显示 </p>
<p>​    umask –p 输出可被调用     </p>
<p>全局设置: /etc/bashrc 用户设置:~/.bashrc </p>
<h4 id="Linux文件系统上的特殊权限"><a href="#Linux文件系统上的特殊权限" class="headerlink" title="Linux文件系统上的特殊权限"></a>Linux文件系统上的特殊权限</h4><p>SUID, SGID, Sticky </p>
<p>三种常用权限:r, w, x user, group, other </p>
<p>安全上下文 </p>
<p>前提:进程有属主和属组；文件有属主和属组 </p>
<p>(1) 任何一个可执行程序文件能不能启动为进程,取决发起者对程序文件是否拥有 执行权限 </p>
<p>(2) 启动为进程之后,其进程的属主为发起者,进程的属组为发起者所属的组 </p>
<p>(3) 进程访问文件时的权限,取决于进程的发起者 </p>
<p>​    (a) 进程的发起者,同文件的属主:则应用文件属主权限 </p>
<p>​    (b) 进程的发起者,属于文件属组；则应用文件属组权限 </p>
<p>​    (c) 应用文件“其它”权限     </p>
<h4 id="可执行文件上的SUID权限"><a href="#可执行文件上的SUID权限" class="headerlink" title="可执行文件上的SUID权限"></a>可执行文件上的SUID权限</h4><p>任何一个可执行程序文件能不能启动为进程:取决发起者对程序文件是否拥有 执行权限 </p>
<p>启动为进程之后,其进程的属主为原程序文件的属主 </p>
<p>SUID只对二进制可执行程序有效 </p>
<p>SUID设置在目录上无意义 </p>
<p>权限设定: </p>
<p>​    chmod u+s FILE… </p>
<p>​    chmod u-s FILE… </p>
<p>​    SUID使用数字表示法可以用 4 来表示.</p>
<h4 id="可执行文件上SGID权限"><a href="#可执行文件上SGID权限" class="headerlink" title="可执行文件上SGID权限"></a>可执行文件上SGID权限</h4><p>任何一个可执行程序文件能不能启动为进程,取决发起者对程序文件是否拥有 执行权限 </p>
<p>启动为进程之后,其进程的属组为原程序文件的属组 </p>
<p>权限设定: </p>
<p>​    chmod g+s FILE… </p>
<p>​    chmod g-s FILE… </p>
<h4 id="目录上的SGID权限"><a href="#目录上的SGID权限" class="headerlink" title="目录上的SGID权限"></a>目录上的SGID权限</h4><p>默认情况下,用户创建文件时,其属组为此用户所属的主组 </p>
<p>一旦某目录被设定了SGID,则对此目录有写权限的用户在此目录中创建的文件 所属的组为此目录的属组 </p>
<p>通常用于创建一个协作目录 </p>
<p>权限设定: </p>
<p>​    chmod g+s DIR… </p>
<p>​    chmod g-s DIR…     </p>
<p>​    SGID使用数字表示法可以用 2 来表示.</p>
<h4 id="Sticky位"><a href="#Sticky位" class="headerlink" title="Sticky位"></a>Sticky位</h4><p>具有写权限的目录通常用户可以删除该目录中的任何文件,无论该文件的权限 或拥有权 </p>
<p>在目录设置Sticky 位,只有文件的所有者或root可以删除该文件 </p>
<p>sticky 设置在文件上无意义 </p>
<p>权限设定: </p>
<p>​    chmod o+t DIR… </p>
<p>​    chmod o-t DIR…     </p>
<p>​    Sticky使用数字表示发可以用 1 来表示.</p>
<p>例如: </p>
<p>​    ls -ld /tmp drwxrwxrwt 12 root root 4096 Nov 2 15:44 /tmp </p>
<h4 id="特殊权限数字法"><a href="#特殊权限数字法" class="headerlink" title="特殊权限数字法"></a>特殊权限数字法</h4><p>SUID SGID STICKY </p>
<p>000 0 </p>
<p>001 1 </p>
<p>010 2 </p>
<p>011 3 </p>
<p>100 4 </p>
<p>101 5 </p>
<p>110 6 </p>
<p>111 7 </p>
<p>chmod 4777 /tmp/a.txt </p>
<h4 id="权限位映射"><a href="#权限位映射" class="headerlink" title="权限位映射"></a>权限位映射</h4><p>SUID: user,占据属主的执行权限位 </p>
<p>​    s: 属主拥有x权限 </p>
<p>​    S: 属主没有x权限     </p>
<p>SGID: group,占据属组的执行权限位 </p>
<pre><code>s: group拥有x权限 </code></pre><p>​    S: group没有x权限 </p>
<p>Sticky: other,占据other的执行权限位 </p>
<p>​    t: other拥有x权限 </p>
<p>​    T: other没有x权限     </p>
<p><strong>特殊权限</strong></p>
<p>suid (4) : 作用于二进制程序,功能: 当用户执行此程序的时,将继承此文件所有者的权限</p>
<p>sgid (2) : 作用于二进制程序,功能: 当用户执行此程序的时,将继承此文件所有组的权限</p>
<pre><code>作用于目录上,功能:当用户在目录新建文件时,新文件的所属组自动继承此目录的所属组</code></pre><p>sticky (1) : 作用于目录上,功能: 此目录中的文件,只能被所有者自己删除</p>
<h4 id="设定文件特定属性"><a href="#设定文件特定属性" class="headerlink" title="设定文件特定属性"></a>设定文件特定属性</h4><p>chattr +i 不能删除,改名,更改 </p>
<p>chattr +a 只能追加内容 </p>
<p>lsattr 显示特定属性 </p>
<h4 id="访问控制列表"><a href="#访问控制列表" class="headerlink" title="访问控制列表"></a>访问控制列表</h4><p>ACL:Access Control List,实现灵活的权限管理 </p>
<p>除了文件的所有者,所属组和其它人,可以对更多的用户设置权限 </p>
<p>CentOS7 默认创建的xfs和ext4文件系统具有ACL功能 </p>
<p>CentOS7 之前版本,默认手工创建的ext4文件系统无ACL功能,需手动增加 </p>
<pre><code>tune2fs –o acl /dev/sdb1 

mount –o acl /dev/sdb1 /mnt/test </code></pre><p>ACL生效顺序:所有者,自定义用户,自定义组,其他人 </p>
<p>为多用户或者组的文件和目录赋予访问权限rwx </p>
<p>• mount -o acl /directory </p>
<p>• getfacl file |directory </p>
<p>• setfacl -m u:mark:rwx file|directory </p>
<p>• setfacl -Rm g:sales:rwX directory </p>
<p>• setfacl -M file.acl file|directory </p>
<p>• setfacl -m g:salesgroup:rw file| directory </p>
<p>• setfacl -m d:u:mark:rx directory </p>
<p>• setfacl -x u:mark file |directory </p>
<p>• setfacl -X file.acl directory </p>
<p>ACL文件上的group权限是mask 值(自定义用户,自定义组,拥有组的最大权 限),而非传统的组权限 </p>
<p>getfacl 可看到特殊权限:flags </p>
<p>通过ACL赋予目录默认x权限,目录内文件也不会继承x权限 </p>
<p>base ACL 不能删除 </p>
<p>setfacl -k dir 删除默认ACL权限 </p>
<p>setfacl –b file1清除所有ACL权限 </p>
<p>getfacl file1 | setfacl –set-file=- file2 复制file1的acl权限给file2 </p>
<p>mask只影响除所有者和other的之外的人和组的最大权限 </p>
<p>Mask需要与用户的权限进行逻辑与运算后,才能变成有限的权限(Effective Permission) </p>
<p>用户或组的设置必须存在于mask权限设定范围内才会生效 </p>
<pre><code>setfacl -m mask::rx file </code></pre><p>–set选项会把原有的ACL项都删除,用新的替代,需要注意的是一定要包含 UGO的设置,不能象-m一样只是添加ACL就可以 </p>
<p>示例: </p>
<pre><code>setfacl --set u::rw,u:mark:rw,g::r,o::- file1 </code></pre><p>备份和恢复ACL </p>
<p>主要的文件操作命令cp和mv都支持ACL,只是cp命令需要加上-p 参数。但是 tar等常见的备份工具是不会保留目录和文件的ACL信息 </p>
<pre><code>getfacl -R /tmp/dir1 &gt; acl.txt 

setfacl -R -b /tmp/dir1 

setfacl -R --set-file=acl.txt  /tmp/dir1 

setfacl --restore acl.txt 

getfacl -R /tmp/dir1 </code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Linux-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mark_avatar.png">
      <meta itemprop="name" content="Mark">
      <meta itemprop="description" content="半吊子民工 英特纳雄耐尔就一定要实现">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mark blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Linux-%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" class="post-title-link" itemprop="url">Linux 文件管理</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-22 19:30:58" itemprop="dateCreated datePublished" datetime="2015-07-22T19:30:58+08:00">2015-07-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-01-02 23:24:43" itemprop="dateModified" datetime="2019-01-02T23:24:43+08:00">2019-01-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E6%B5%B7%E6%8B%BE%E8%B4%9D/" itemprop="url" rel="index"><span itemprop="name">学海拾贝</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="文件系统结构元素"><a href="#文件系统结构元素" class="headerlink" title="文件系统结构元素"></a>文件系统结构元素</h3><p>文件和目录被组织成一个单根倒置树结构 </p>
<p>文件系统从根目录下开始,用“/”表示 </p>
<p>根文件系统(rootfs):root filesystem </p>
<p>文件名称<strong>区分大小写</strong> </p>
<p>以.开头的文件为隐藏文件 </p>
<p>路径分隔的 / 文件有两类数据: </p>
<p>​    元数据:metadata </p>
<p>​    数据:data </p>
<p>文件系统分层结构:LSB Linux Standard Base </p>
<p>FHS: (Filesystem Hierarchy Standard) <a href="http://www.pathname.com/fhs/" target="_blank" rel="noopener">http://www.pathname.com/fhs/</a> </p>
<h4 id="文件名规则"><a href="#文件名规则" class="headerlink" title="文件名规则"></a>文件名规则</h4><p>文件名最长255个字节 </p>
<p>包括路径在内文件名称最长4095个字节 </p>
<p>蓝色–&gt;目录 绿色–&gt;可执行文件 红色–&gt;压缩文件 浅蓝色–&gt;链接文 件 灰色–&gt;其他文件 </p>
<p>除了斜杠和NUL,所有字符都有效.但使用特殊字符的目录名和文件不推荐使用, 有些字符需要用引号来引用它们。 </p>
<p>标准Linux文件系统(如ext4),文件名称大小写敏感。例如: MAIL, Mail, mail, mAiL </p>
<h4 id="文件系统结构"><a href="#文件系统结构" class="headerlink" title="文件系统结构"></a>文件系统结构</h4><p>/boot:引导文件存放目录,内核文件(vmlinuz)、引导加载器(bootloader, grub)都存放于此目录    /bin:供所有用户使用的基本命令；不能关联至独立分区,OS启动即会用到的 程序 </p>
<p>/sbin:管理类的基本命令；不能关联至独立分区,OS启动即会用到的程序 </p>
<p>/lib:启动时程序依赖的基本共享库文件以及内核模块文件(/lib/modules) </p>
<p>/lib64:专用于x86_64系统上的辅助共享库文件存放位置 </p>
<p>/etc:配置文件目录 </p>
<p>/home/USERNAME:普通用户家目录 </p>
<p>/root:管理员的家目录 </p>
<p>/media:便携式移动设备挂载点</p>
<h4 id="文件系统结构-1"><a href="#文件系统结构-1" class="headerlink" title="文件系统结构"></a>文件系统结构</h4><p>/mnt:临时文件系统挂载点 </p>
<p>/dev:设备文件及特殊文件存储位置 </p>
<p>​    b: block device,随机访问 </p>
<p>​    c: character device,线性访问 </p>
<p>/opt:第三方应用程序的安装位置 </p>
<p>/srv:系统上运行的服务用到的数据 </p>
<p>/tmp:临时文件存储位置 </p>
<h4 id="文件系统结构-2"><a href="#文件系统结构-2" class="headerlink" title="文件系统结构"></a>文件系统结构</h4><p>/usr: universal shared, read-only data </p>
<p>​    bin: 保证系统拥有完整功能而提供的应用程序 </p>
<p>​    sbin: lib:32位使用 </p>
<p>​    lib64:只存在64位系统 </p>
<p>​    include: C程序的头文件(header files) </p>
<p>​    share:结构化独立的数据,例如doc, man等 </p>
<p>​    local:第三方应用程序的安装位置 </p>
<p>​    bin, sbin, lib, lib64, etc, share </p>
<p>/var: variable data files </p>
<p>​    cache: 应用程序缓存数据目录 </p>
<p>​    lib: 应用程序状态信息数据 </p>
<p>​    local:专用于为/usr/local下的应用程序存储可变数据； </p>
<p>​    lock: 锁文件 </p>
<p>​    log: 日志目录及文件 </p>
<p>​    opt: 专用于为/opt下的应用程序存储可变数据； </p>
<p>​    run: 运行中的进程相关数据,通常用于存储进程pid文件 </p>
<p>​    spool: 应用程序数据池 </p>
<p>​    tmp: 保存系统两次重启之间产生的临时数据 </p>
<p>/proc: 用于输出内核与进程信息相关的虚拟文件系统 </p>
<p>/sys:用于输出当前系统上硬件设备相关信息虚拟文件系统 </p>
<p>/selinux: security enhanced Linux,selinux相关的安全策略等信息的存储位置 </p>
<h4 id="Linux上应用程序的组成部分"><a href="#Linux上应用程序的组成部分" class="headerlink" title="Linux上应用程序的组成部分"></a>Linux上应用程序的组成部分</h4><p>二进制程序:/bin, /sbin, /usr/bin, /usr/sbin, /usr/local/bin, /usr/local/sbin </p>
<p>库文件:/lib, /lib64, /usr/lib, /usr/lib64, /usr/local/lib, /usr/local/lib64 </p>
<p>配置文件:/etc, /etc/DIRECTORY, /usr/local/etc </p>
<p>帮助文件:/usr/share/man, /usr/share/doc, /usr/local/share/man, /usr/local/share/doc </p>
<h4 id="Linux下的文件类型"><a href="#Linux下的文件类型" class="headerlink" title="Linux下的文件类型"></a>Linux下的文件类型</h4><p>   -:普通文件 </p>
<p>   d: 目录文件 </p>
<p>   b: 块设备 </p>
<p>   c: 字符设备 </p>
<p>   l: 符号链接文件 </p>
<p>   p: 管道文件pipe </p>
<p>   s: 套接字文件socket </p>
<h4 id="CentOS-7-目录变化"><a href="#CentOS-7-目录变化" class="headerlink" title="CentOS 7 目录变化"></a>CentOS 7 目录变化</h4><p>   /bin 和 /usr/bin </p>
<p>   /sbin 和 /usr/sbin </p>
<p>   /lib 和/usr/lib </p>
<p>   /lib64 和 /usr/lib64  </p>
<h4 id="显示当前工作目录"><a href="#显示当前工作目录" class="headerlink" title="显示当前工作目录"></a>显示当前工作目录</h4><p>   每个shell和系统进程都有一个当前的工作目录 </p>
<p>   CWD:current work directory </p>
<p>   显示当前shell CWD的绝对路径 </p>
<p>pwd: printing working directory </p>
<p>​    -P 显示真实物理路径 </p>
<p>​    -L 显示链接路径(默认)</p>
<h4 id="相对路径和绝对路径"><a href="#相对路径和绝对路径" class="headerlink" title="相对路径和绝对路径"></a>相对路径和绝对路径</h4><p>​    绝对路径 </p>
<p>​    / 以正斜杠开始 </p>
<p>​    可以用于完整的文件的位置路径 </p>
<p>​    可用于任何想指定一个文件名的时候 </p>
<p>   相对路径名 </p>
<p>​    不以斜线开始 </p>
<p>​    指定相对于当前工作目录或某目录的位置 </p>
<p>​    可以作为一个简短的形式指定一个文件名 </p>
<p>   基名:basename </p>
<p>   目录名:dirname </p>
<h4 id="更改目录"><a href="#更改目录" class="headerlink" title="更改目录"></a>更改目录</h4><p>   cd 改变目录 </p>
<p>使用绝对或相对路径: </p>
<p>​    cd /home/mark/ </p>
<p>​    cd home/mark </p>
<p>切换至父目录: cd .. </p>
<p>切换至当前用户主目录: cd </p>
<p>切换至以前的工作目录: cd - </p>
<p>   选项:-P </p>
<p>   相关的环境变量: </p>
<p>​    PWD:当前目录路径 </p>
<p>​    OLDPWD:上一次目录路径 </p>
<h4 id="列出目录内容"><a href="#列出目录内容" class="headerlink" title="列出目录内容"></a>列出目录内容</h4><p>   列出当前目录的内容或指定目录 </p>
<p>   用法:ls [options][files_or_dirs] </p>
<p>   示例: </p>
<p>​    ls -a 包含隐藏文件 </p>
<p>​    ls -l 显示额外的信息 </p>
<p>​    ls -R 目录递归通过 </p>
<p>​    ls -ld 目录和符号链接信息 </p>
<p>​    ls -1 文件分行显示 </p>
<p>​    ls –S 按从大到小排序 </p>
<p>​    ls –t 按mtime排序 </p>
<p>​    ls –u 配合-t选项,显示并按atime从新到旧排序 </p>
<p>​    ls –U 按目录存放顺序显示 </p>
<p>​    ls –X 按文件后缀排序 </p>
<h4 id="查看文件状态"><a href="#查看文件状态" class="headerlink" title="查看文件状态"></a>查看文件状态</h4><p>   stat </p>
<p>   文件:metadata, data </p>
<p>   三个时间戳: </p>
<p>​    access time:访问时间,atime,读取文件内容 </p>
<p>​    modify time: 修改时间, mtime,改变文件内容(数据) </p>
<p>​    change time: 改变时间, ctime,元数据发生改变 </p>
<h4 id="文件通配符"><a href="#文件通配符" class="headerlink" title="文件通配符"></a>文件通配符</h4><p>*<em>匹配零个或多个字符 *</em></p>
<p>? : 匹配任何单个字符 </p>
<p>~ : 当前用户家目录 </p>
<p>​    ~mark 用户mark家目录 </p>
<p>~+ : 当前工作目录 </p>
<p>~- : 前一个工作目录 </p>
<p>[0-9] 匹配数字范围 </p>
<p>[a-z]:字母</p>
<p>[A-Z]:字母</p>
<p>[mark] 匹配列表中的任何的一个字符 </p>
<p>[^mark] 匹配列表中的所有字符以外的字符 </p>
<p>预定义的字符类:man 7 glob</p>
<p>[:digit:]:任意数字,相当于0-9</p>
<p>[:lower:]:任意小写字母</p>
<p>[:upper:]: 任意大写字母 </p>
<p>[:alpha:]: 任意大小写字母 </p>
<p>[:alnum:]:任意数字或字母</p>
<p>[:blank:]:水平空白字符</p>
<p>[:space:]:水平或垂直空白字符</p>
<p>[:punct:]:标点符号</p>
<p>[:print:]:可打印字符</p>
<p>[:cntrl:]:控制(非打印)字符</p>
<p>[:graph:]:图形字符</p>
<p>[:xdigit:]:十六进制字符</p>
<h4 id="创建空文件和刷新时间"><a href="#创建空文件和刷新时间" class="headerlink" title="创建空文件和刷新时间"></a>创建空文件和刷新时间</h4><p>   touch命令: </p>
<p>​   touch [OPTION]… FILE… </p>
<p>​    -a 仅改变 atime和ctime </p>
<p>​    -m 仅改变 mtime和ctime </p>
<p>​    -t [[CC]YY]MMDDhhmm[.ss] 指定atime和mtime的时间戳 </p>
<p>​        touch -t 200909010059.30 marktest.sh  //#将文件时间属性改为9月1号0点59分30秒         </p>
<p>​    -c 如果文件不存在,则不予创建</p>
<h3 id="复制转移和删除文件"><a href="#复制转移和删除文件" class="headerlink" title="复制转移和删除文件"></a>复制转移和删除文件</h3><h4 id="复制文件和目录-CP"><a href="#复制文件和目录-CP" class="headerlink" title="复制文件和目录 CP"></a>复制文件和目录 CP</h4><p>   cp [OPTION]… [-T] SOURCE DEST </p>
<p>   cp [OPTION]… SOURCE… DIRECTORY </p>
<p>   cp [OPTION]… -t DIRECTORY SOURCE… </p>
<p>   cp SRC DEST </p>
<p>SRC是文件: </p>
<p>​    如果目标不存在:新建DEST,并将SRC中内容填充至DEST中 </p>
<p>​    如果目标存在: </p>
<p>​        如果DEST是文件:将SRC中的内容覆盖至DEST中 </p>
<p>​            基于安全,建议为cp命令使用-i选项 </p>
<p>​        如果DEST是目录:在DEST下新建与原文件同名的文件,并将SRC中内容填 充至新文件中 </p>
<pre><code>cp SRC... DEST </code></pre><p>SRC…:多个文件 </p>
<p>​    DEST必须存在,且为目录,其它情形均会出错； </p>
<pre><code>cp SRC DEST </code></pre><p>​    SRC是目录:此时使用选项:-r </p>
<p>​        如果DEST不存在:则创建指定目录,复制SRC目录中所有文件至DEST中； </p>
<p>​        如果DEST存在: </p>
<p>​            如果DEST是文件:报错 </p>
<p>​            如果DEST是目录: </p>
<table>
<thead>
<tr>
<th>源\目标</th>
<th>不存在</th>
<th>存在且为文件</th>
<th>存在且为目录</th>
</tr>
</thead>
<tbody><tr>
<td>一个文件</td>
<td>新建DEST,并将SRC中内容填充至DEST中</td>
<td>将SRC中的内容覆盖至DEST中,存在数据丢失的风险,要加 -i</td>
<td>在DEST下新建与原文件同名的文件,并将SRC中内容填充至新文件中</td>
</tr>
<tr>
<td>多个文件</td>
<td><strong>提示错误</strong></td>
<td><strong>提示错误</strong></td>
<td>在DEST下新建与源文件同名的文件,并将源文件内容复制进新文件中</td>
</tr>
<tr>
<td>目录要用 -r 选项</td>
<td>创建指定DEST同名目录,复制SRC目录中所有文件至DEST下</td>
<td><strong>提示错误</strong></td>
<td>在DEST下新建与原 目录同名的目录， 并将SRC中内容复 制至新目录中</td>
</tr>
</tbody></table>
<h4 id="cp-常用选项"><a href="#cp-常用选项" class="headerlink" title="cp 常用选项"></a>cp 常用选项</h4><p>   -i:覆盖前提示 –n:不覆盖,注意两者顺序 </p>
<p>   -r, -R: 递归复制目录及内部的所有内容 </p>
<p>   -a: 归档,相当于-dR –preserv=all </p>
<p>   -d:–no-dereference –preserv=links 不复制原文件,只复制链接名 </p>
<p>   –preserv[=ATTR_LIST] </p>
<p>​    mode: 权限 </p>
<p>​    ownership: 属主属组 </p>
<p>​    timestamp: </p>
<p>​    links </p>
<p>​    xattr </p>
<p>​    context </p>
<p>​    all </p>
<p>   -p: 等同–preserv=mode,ownership,timestamp </p>
<p>   -v: –verbose </p>
<p>   -f: –force </p>
<p>   -u:–update 只复制源比目标更新文件或目标不存在的文件 </p>
<p>   –backup=numbered 目标存在,覆盖前先备份加数字后缀 </p>
<h4 id="移动和重命名文件"><a href="#移动和重命名文件" class="headerlink" title="移动和重命名文件"></a>移动和重命名文件</h4><p>   mv [OPTION]… [-T] SOURCE DEST </p>
<p>   mv [OPTION]… SOURCE… DIRECTORY </p>
<p>   mv [OPTION]… -t DIRECTORY SOURCE… </p>
<p>​    常用选项: </p>
<p>​        -i: 交互式</p>
<p>​        -f: 强制 </p>
<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><p>   rm [OPTION]… FILE… </p>
<p>   常用选项: </p>
<p>​    -i 交互式 </p>
<p>​    -f 强制删除 </p>
<p>​    -r 递归 </p>
<p>​    –no-preserve-root 删除/ </p>
<p>   示例: rm -rf / </p>
<h4 id="目录操作"><a href="#目录操作" class="headerlink" title="目录操作"></a>目录操作</h4><p>   tree 显示目录树 </p>
<p>​    -d: 只显示目录 </p>
<p>​    -L level:指定显示的层级数目 </p>
<p>​    -P pattern: 只显示由指定pattern匹配到的路径 </p>
<p>   mkdir 创建目录 </p>
<p>​    -p: 存在于不报错,且可自动创建所需的各目录 </p>
<p>​    -v: 显示详细信息 </p>
<p>​    -m MODE: 创建目录时直接指定权限 </p>
<p>   rmdir 删除空目录 </p>
<p>​    -p: 递归删除父空目录 </p>
<p>​    -v: 显示详细信息 </p>
<p>   rm -r 递归删除目录树 </p>
<h3 id="索引节点"><a href="#索引节点" class="headerlink" title="索引节点"></a>索引节点</h3><p>​    inode(index node)表中包含文件系统所有文件列表 </p>
<p>   一个节点 (索引节点)是在一个表项,包含有关文件的信息( 元数据 ),包 括: </p>
<p>​    文件类型,权限,UID,GID </p>
<p>​    链接数(指向这个文件名路径名称个数) </p>
<p>​    该文件的大小和不同的时间戳 </p>
<p>​    指向磁盘上文件的数据块指针 </p>
<p>​    有关文件的其他数据 </p>
<p>详情查看<a href="http://www.ruanyifeng.com/blog/2011/12/inode.html" target="_blank" rel="noopener">inode表结构</a></p>
<h4 id="cp和inode"><a href="#cp和inode" class="headerlink" title="cp和inode"></a>cp和inode</h4><p>   在 CP的 命令: </p>
<p>​    分配一个空闲的inode号,在inode表中生成新条目 在目录中创建一个目录项,将名称与inode编号关联 拷贝数据生成新的文件 </p>
<h4 id="rm和inode"><a href="#rm和inode" class="headerlink" title="rm和inode"></a>rm和inode</h4><p>rm 命令: </p>
<p>​    链接数递减,从而释放的inode号可以被重用 </p>
<p>​    把数据块放在空闲列表中 </p>
<p>​    删除目录项 </p>
<p>​    数据实际上不会马上被删除,但当另一个文件使用数据块时将被覆盖。</p>
<h4 id="mv和inode"><a href="#mv和inode" class="headerlink" title="mv和inode"></a>mv和inode</h4><p>​    如果mv命令的目标和源在相同的文件系统,作为mv 命令 </p>
<p>​    用新的文件名创建对应新的目录项 </p>
<p>​    删除旧目录条目对应的旧的文件名 </p>
<p>​    不影响inode表(除时间戳)或磁盘上的数据位置:没有数据被移动！ </p>
<p>   如果目标和源在一个不同的文件系统, mv相当于cp和rm </p>
<h3 id="硬链接"><a href="#硬链接" class="headerlink" title="硬链接"></a>硬链接</h3><p>   创建硬链接会增加额外的记录项以引用文件 </p>
<p>   对应于同一文件系统上一个物理文件 </p>
<p>   每个目录引用相同的inode号 </p>
<p>   创建时链接数递增 </p>
<p>   删除文件时,rm命令递减计数的链接 </p>
<p>   文件要存在,至少有一个链接数 </p>
<p>   当链接数为零时,该文件被删除 </p>
<p>   不能跨越驱动器或分区 </p>
<p>   语法: ln filename [linkname ] </p>
<h3 id="符号-软-链接"><a href="#符号-软-链接" class="headerlink" title="符号(软)链接"></a>符号(软)链接</h3><p>   一个符号链接指向另一个文件 </p>
<p>   ls - l的 显示链接的名称和引用的文件 </p>
<p>   一个符号链接的内容是它引用文件的名称 </p>
<p>   可以对目录进行 </p>
<p>   可以跨分区 </p>
<p>   指向的是另一个文件的路径；其大小为指向的路径字符串的长度；不增加或减 少目标文件inode的引用计数； </p>
<p>   语法: ln -s filename [linkname] </p>
<h3 id="确定文件内容"><a href="#确定文件内容" class="headerlink" title="确定文件内容"></a>确定文件内容</h3><p>文件可以包含多种类型的数据 </p>
<p>   检查文件的类型,然后确定适当的打开命令或应用程序使用 </p>
<p>   file [options] … </p>
<p>   常用选项: </p>
<p>​    -b 列出文件辨识结果时,不显示文件名称 </p>
<p>​    -f filelist 列出文件filelist中文件名的文件类型 </p>
<p>​    -F 使用指定分隔符号替换输出文件名后默认的”:”分隔符 </p>
<p>​    -L 查看对应软链接对应文件的文件类型 </p>
<p>​    –help 显示命令在线帮助 </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/Linux-%E5%9F%BA%E7%A1%80%E5%92%8C%E5%B8%AE%E5%8A%A9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/mark_avatar.png">
      <meta itemprop="name" content="Mark">
      <meta itemprop="description" content="半吊子民工 英特纳雄耐尔就一定要实现">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mark blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/Linux-%E5%9F%BA%E7%A1%80%E5%92%8C%E5%B8%AE%E5%8A%A9/" class="post-title-link" itemprop="url">Linux 基础和帮助</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-15 14:34:30" itemprop="dateCreated datePublished" datetime="2015-07-15T14:34:30+08:00">2015-07-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-01-02 23:23:29" itemprop="dateModified" datetime="2019-01-02T23:23:29+08:00">2019-01-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AD%A6%E6%B5%B7%E6%8B%BE%E8%B4%9D/" itemprop="url" rel="index"><span itemprop="name">学海拾贝</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="用户登录"><a href="#用户登录" class="headerlink" title="用户登录"></a>用户登录</h3><h4 id="root-用户"><a href="#root-用户" class="headerlink" title="root 用户"></a>root 用户</h4><p>一个特殊的管理帐户 </p>
<p>也被称为超级用户 </p>
<p>root已接近完整的系统控制 </p>
<p>对系统损害几乎有无限的能力 </p>
<p>除非必要,不要登录为 root </p>
<h4 id="普通-非特权-用户"><a href="#普通-非特权-用户" class="headerlink" title="普通( 非特权 )用户"></a>普通( 非特权 )用户</h4><p>权限有限 </p>
<p>造成损害的能力比较有限 </p>
<hr>
<h3 id="终端terminal"><a href="#终端terminal" class="headerlink" title="终端terminal"></a>终端terminal</h3><p>设备终端 键盘鼠标显示器</p>
<p>物理终端( /dev/console ) 控制台console </p>
<p>虚拟终端(tty:teletypewriters, /dev/tty# #为[1-6]) tty 可有n个,Ctrl+Alt+F[1-6] </p>
<p>图形终端( /dev/tty7 ) startx, xwindows </p>
<pre><code>CentOS 6: Ctrl + Alt + F7 

CentOS 7: 在哪个终端启动,即位于哪个虚拟终端 </code></pre><p>串行终端( /dev/ttyS# ) ttyS </p>
<p>伪终端( pty:pseudo-tty , /dev/pts/# ) pty, SSH远程连接 </p>
<p>查看当前的终端设备:#tty </p>
<hr>
<h3 id="交互式接口"><a href="#交互式接口" class="headerlink" title="交互式接口"></a>交互式接口</h3><p>交互式接口:启动终端后,在终端设备附加一个交互式应用程序 </p>
<p>GUI:Graphic User Interface </p>
<p>X protocol, window manager, desktop Desktop: GNOME (C, 图形库gtk), KDE (C++,图形库qt) XFCE (轻量级桌面) </p>
<p>CLI:Command Line Interface </p>
<p>shell程序:sh (bourn 史蒂夫·伯恩) csh tcsh ksh (korn) bash (bourn again shell)GPL zsh </p>
<hr>
<h3 id="什么是shell"><a href="#什么是shell" class="headerlink" title="什么是shell"></a>什么是shell</h3><p>Shell 是Linux系统的用户界面,提供了用户与内核进行交互操作的一种接口。 它接收用户输入的命令并把它送入内核去执行 </p>
<p>shell也被称为LINUX的命令解释器(command interpreter) </p>
<p>shell是一种高级程序设计语言 </p>
<hr>
<h3 id="bash-shell"><a href="#bash-shell" class="headerlink" title="bash shell"></a>bash shell</h3><p>GNU Bourne-Again Shell(bash)是GNU计划中重要的工具软件之一,目前也 是 Linux标准的shell,与sh兼容</p>
<p>CentOS默认使用 </p>
<p>显示当前使用的shell </p>
<p><code>echo ${SHELL}</code></p>
<p>显示当前系统使用的所有shell </p>
<p><code>cat /etc/shells</code></p>
<hr>
<h3 id="命令提示符"><a href="#命令提示符" class="headerlink" title="命令提示符"></a>命令提示符</h3><p>命令提示符:prompt </p>
<p><code>[root@localhost ~]#</code></p>
<blockquote>
<p>#管理员     $ 普通用户 </p>
</blockquote>
<p>显示提示符格式 </p>
<p><code>[root@localhost ~]#echo $PS1</code></p>
<p>修改提示符格式 </p>
<p><code>PS1=&quot;\[\e[1;5;41;33m\][\u@\h \W]\\$\[\e[0m\]&quot;</code></p>
<blockquote>
<p>\e \033                 \u 当前用户 </p>
</blockquote>
<blockquote>
<p>\h 主机名简称         \H 主机名 </p>
</blockquote>
<blockquote>
<p>\w 当前工作目录         \W 当前工作目录基名 </p>
</blockquote>
<blockquote>
<p>\t 24小时时间格式     \T 12小时时间格式 ! 命令历史数 </p>
</blockquote>
<blockquote>
<p>\# 开机后命令历史数</p>
</blockquote>
<hr>
<h3 id="执行命令"><a href="#执行命令" class="headerlink" title="执行命令"></a>执行命令</h3><p>输入命令后回车 </p>
<p>提请shell程序找到键入命令所对应的可执行程序或代码,并由其分析后 提交给内核分配资源将其运行起来 </p>
<p>在shell中可执行的命令有两类 </p>
<h4 id="内部命令"><a href="#内部命令" class="headerlink" title="内部命令:"></a>内部命令:</h4><p>由shell自带的,而且通过某命令形式提供 help 内部命令列表 </p>
<p><code>enable cmd</code></p>
<p>启用内部命令 </p>
<p><code>enable –n cmd</code></p>
<p>禁用内部命令 </p>
<p><code>enable –n</code></p>
<p>查看所有禁用的内部命令 </p>
<h4 id="外部命令"><a href="#外部命令" class="headerlink" title="外部命令:"></a>外部命令:</h4><p>在文件系统路径下有对应的可执行程序文件 </p>
<p>查看路径:</p>
<p><code>which -a |--skip-alias</code></p>
<p><code>whereis</code> </p>
<p>区别指定的命令是内部或外部命令 </p>
<p><code>type COMMAND</code></p>
<h4 id="执行外部命令"><a href="#执行外部命令" class="headerlink" title="执行外部命令"></a>执行外部命令</h4><p>Hash缓存表 </p>
<p>系统初始hash表为空,当外部命令执行时,默认会从PATH路径下寻找该命 令,找到后会将这条命令的路径记录到hash表中,当再次使用该命令时,shell解 释器首先会查看hash表,存在将执行之,如果不存在,将会去PATH路径下寻找。 利用hash缓存表可大大提高命令的调用速率 </p>
<p>hash常见用法 </p>
<p><code>hash</code>                 //显示hash缓存 </p>
<p><code>hash –l</code>             //显示hash缓存,可作为输入使用 </p>
<p><code>hash –p path name</code>     //将命令全路径path起别名为name </p>
<p><code>hash –t name</code>         //打印缓存中name的路径</p>
<p> <code>hash –d name</code>         //清除name缓存 </p>
<p><code>hash –r</code>             //清除缓存 </p>
<h4 id="命令别名"><a href="#命令别名" class="headerlink" title="命令别名"></a>命令别名</h4><p>显示当前shell进程所有可用的命令别名 </p>
<p><code>alias</code></p>
<p>定义别名NAME,其相当于执行命令VALUE </p>
<p><code>alias NAME=&#39;VALUE&#39;</code></p>
<p>在命令行中定义的别名,仅对当前shell进程有效 </p>
<p>如果想永久有效,要定义在配置文件中 </p>
<p>仅对当前用户:</p>
<p><code>~/.bashrc</code> </p>
<p>对所有用户有效:</p>
<p><code>/etc/bashrc</code></p>
<p>编辑配置给出的新配置不会立即生效 </p>
<p>bash进程重新读取配置文件 </p>
<p><code>source /path/to/config_file</code></p>
<p><code>. /path/to/config_file</code></p>
<p>撤消别名:unalias </p>
<p><code>unalias [-a] name [name ...]</code></p>
<p>-a 取消所有别名 </p>
<p>如果别名同原命令同名,如果要执行原命令,可使用 </p>
<p><code>\ALIASNAME</code></p>
<p><code>&quot;ALIASNAME&quot;</code></p>
<p><code>&#39;ALIASNAME&#39;</code></p>
<p><code>command ALIASNAME</code></p>
<p><code>/path/commmand</code></p>
<h4 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h4><p>COMMAND [OPTIONS…][ARGUMENTS…] </p>
<p>选项:用于启用或关闭命令的某个或某些功能 </p>
<p>短选项:-c 例如:-l, -h </p>
<p>长选项:–word 例如:–all, –human-readable </p>
<p>参数:命令的作用对象,比如文件名,用户名等 </p>
<p>注意: </p>
<p>多个选项以及多参数和命令之间使用空白字符分隔 </p>
<p>取消和结束命令执行:Ctrl+c,Ctrl+d </p>
<p>多个命令可以用;符号分开 </p>
<p>一个命令可以用\分成多行 </p>
<h4 id="时间和日期"><a href="#时间和日期" class="headerlink" title="时间和日期"></a>时间和日期</h4><p>Linux的两种时钟 </p>
<p>系统时钟:由Linux内核通过CPU的工作频率进行的 </p>
<p>硬件时钟:主板 </p>
<p>相关命令 </p>
<p>date 显示和设置系统时间 </p>
<p><code>date +%s</code></p>
<p><code>date -d @1509536033</code></p>
<p>hwclock,clock: 显示硬件时钟 </p>
<p>-s, –hctosys 以硬件时钟为准,校正系统时钟 </p>
<p>-w, –systohc 以系统时钟为准,校正硬件时钟 </p>
<p>时区:/etc/localtime </p>
<p>显示日历:</p>
<p>cal –y </p>
<hr>
<h3 id="简单命令"><a href="#简单命令" class="headerlink" title="简单命令"></a>简单命令</h3><p>关机:halt, poweroff </p>
<p>重启:reboot </p>
<pre><code>-f: 强制,不调用shutdown 

-p: 切断电源 </code></pre><p>关机或重启:shutdown </p>
<p>shutdown [OPTION]… TIME [MESSAGE] </p>
<pre><code>-r: reboot 

-h: halt 

-c:cancel </code></pre><p>TIME:无指定,默认相当于 +1 </p>
<pre><code>now: 立刻,相当于+0 

+m: 相对时间表示法,几分钟之后；例如 +3 

hh:mm: 绝对时间表示,指明具体时间 </code></pre><p>用户登录信息查看命令:</p>
<p><code>whoami</code>    : 显示当前登录有效用户 </p>
<p><code>who</code>    : 系统当前所有的登录会话 </p>
<p><code>w</code>        : 系统当前所有的登录会话及所做的操作 </p>
<p>screen命令: </p>
<pre><code>创建新screen会话 

    screen –S [SESSION] 

加入screen会话 

    screen –x [SESSION] 

退出并关闭screen会话 

    exit 

剥离当前screen会话 

    Ctrl+a,d 

显示所有已经打开的screen会话 

    screen -ls 

恢复某screen会话 

    screen -r [SESSION] </code></pre><p>echo命令 </p>
<p>功能:显示字符 </p>
<p>语法:echo [-neE][字符串] </p>
<p>说明:echo会将输入的字符串送往标准输出。输出的字符串间以空白字符隔开, 并在最后加上换行号 </p>
<p>选项: </p>
<pre><code>-E (默认)不支持 \ 解释功能 

-n 不自动换行 

-e 启用 \ 字符的解释功能 </code></pre><p>显示变量 echo “$VAR_NAME” 变量会替换,弱引用 echo ‘$VAR_NAME‘ 变量不会替换,强引用 </p>
<p>启用命令选项-e,若字符串中出现以下字符,则特别加以处理,而不会将它当成 一般文字输出 </p>
<pre><code>\a 发出警告声 

\b 退格键 

\c 最后不加上换行符号 

\n 换行且光标移至行首 

\r 回车,即光标移至行首,但不换行 

\t 插入tab 

\\ 插入\字符 

\0nnn 插入nnn(八进制)所代表的ASCII字符 

    echo -e &apos;\033[43;31;5mmagedu\033[0m&apos; 

\xHH插入HH(十六进制)所代表的ASCII字 </code></pre><h4 id="命令行扩展-被括起来的集合"><a href="#命令行扩展-被括起来的集合" class="headerlink" title="命令行扩展,被括起来的集合"></a>命令行扩展,被括起来的集合</h4><p>命令行扩展:$( ) 或   ``</p>
<p>把一个命令的输出打印给另一个命令的参数 </p>
<p><code>echo &quot;This system&#39;s name is $(hostname) &quot;</code></p>
<p><code>This system&#39;s name is server1.example.com</code></p>
<p>括号扩展:{ } </p>
<p>打印重复字符串的简化形式 </p>
<p><code>echo file{1,3,5}</code></p>
<p>生成 file1 file3 file5 </p>
<p><code>rm -f file{1,3,5}</code></p>
<p><code>echo {1..10}</code></p>
<p><code>echo {a..z}</code></p>
<p><code>echo {000..20..2}</code></p>
<hr>
<h3 id="Tab键补全"><a href="#Tab键补全" class="headerlink" title="Tab键补全"></a>Tab键补全</h3><p>命令补全 </p>
<pre><code>内部命令: 

外部命令:bash根据PATH环境变量定义的路径,自左而右在每个路径搜寻 以给定命令名命名的文件,第一次找到的命令即为要执行的命令 

用户给定的字符串只有一条惟一对应的命令,直接补全 

否则,再次Tab会给出列表 </code></pre><p>路径补全 </p>
<pre><code>把用户给出的字符串当做路径开头,并在其指定上级目录下搜索以指定的字符 串开头的文件名                             

如果惟一:则直接补全 

否则:再次Tab给出列表 </code></pre><h4 id="双击Tab键"><a href="#双击Tab键" class="headerlink" title="双击Tab键"></a>双击Tab键</h4><p>command 2Tab 所有子命令或文件补全 </p>
<p>string2Tab 以string开头命令 </p>
<p>/2Tab 显示所有根目录下一级目录,包括隐藏目录 </p>
<p>./2Tab 当前目录下子目录,包括隐藏目录 </p>
<p>*2Tab 当前目录下子目录,不包括隐藏目录 </p>
<p>~2Tab 所有用户列表 </p>
<p>$2Tab 所有变量 </p>
<p>@2Tab /etc/hosts记录 (centos7不支持) </p>
<p>=2Tab 相当于ls –A (centos7不支持) </p>
<hr>
<h3 id="命令行历史"><a href="#命令行历史" class="headerlink" title="命令行历史"></a>命令行历史</h3><p>保存你输入的命令历史。可以用它来重复执行命令 </p>
<p>登录shell时,会读取命令历史文件中记录下的命令~/.bash_history </p>
<p>登录进shell后新执行的命令只会记录在缓存中；这些命令会用户退出时”追 加”至命令历史文件中 </p>
<p>重复前一个命令,有4种方法 </p>
<pre><code>重复前一个命令使用上方向键,并回车执行 

按 !! 并回车执行 

输入 !-1 并回车执行 

按 Ctrl+p 并回车执行 </code></pre><p>!:0 执行前一条命令(去除参数) </p>
<p>Ctrl + n 显示当前历史中的下一条命令,但不执行 </p>
<p>Ctrl + j 执行当前命令 </p>
<p>!n 执行history命令输出对应序号n的命令 </p>
<p>!-n 执行history历史中倒数第n个命令 </p>
<p>!string 重复前一个以”string”开头的命令 </p>
<p>!?string 重复前一个包含string的命令 </p>
<p>!string:p 仅打印命令历史,而不执行 </p>
<p>!$:p 打印输出 !$ (上一条命令的最后一个参数)的内容 </p>
<p>!<em>:p 打印输出 !</em>(上一条命令的所有参数)的内容 </p>
<p>^string 删除上一条命令中的第一个string </p>
<p>^string1^string2 将上一条命令中的第一个string1替换为string2 </p>
<p>!:gs/string1/string2 将上一条命令中所有的string1都替换为 string2 </p>
<p>使用up(向上)和down(向下)键来上下浏览从前输入的命令 </p>
<p>ctrl-r来在命令历史中搜索命令 </p>
<p> (reverse-i-search)`’: </p>
<p>Ctrl+g:从历史搜索模式退出 </p>
<p>要重新调用前一个命令中最后一个参数 </p>
<p> !$ 表示 </p>
<p> Esc, .(点击Esc键后松开,然后点击 . 键) </p>
<p> Alt+ .(按住Alt键的同时点击 . 键) </p>
<hr>
<h3 id="命令行历史-1"><a href="#命令行历史-1" class="headerlink" title="命令行历史"></a>命令行历史</h3><p>command !^             利用上一个命令的第一个参数做cmd的参数 </p>
<p>command !$             利用上一个命令的最后一个参数做cmd的参数 </p>
<p>command !*             利用上一个命令的全部参数做cmd的参数 </p>
<p>command !:n         利用上一个命令的第n个参数做cmd的参数 </p>
<p>command !n:^         调用第n条命令的第一个参数 </p>
<p>command !n:$         调用第n条命令的最后一个参数 </p>
<p>command !n:m         调用第n条命令的第m个参数 </p>
<p>command !n:*         调用第n条命令的所有参数 </p>
<p>command !string:^      从命令历史中搜索以 string 开头的命令,并获取它的第一 个参数 </p>
<p>command !string:$     从命令历史中搜索以 string 开头的命令,并获取它的最后一 个参数 </p>
<p>command !string:n      从命令历史中搜索以 string 开头的命令,并获取它的第n 个参数 </p>
<p>command !string:*      从命令历史中搜索以 string 开头的命令,并获取它的所有 参数 </p>
<h4 id="命令history"><a href="#命令history" class="headerlink" title="命令history"></a>命令history</h4><p>history [-c][-d offset][n] </p>
<p>history -anrw [filename] </p>
<p>history -ps arg [arg…] </p>
<pre><code>-c: 清空命令历史 

-d offset: 删除历史中指定的第offset个命令 

n: 显示最近的n条历史 

-a: 追加本次会话新执行的命令历史列表至历史文件 

-r: 读历史文件附加到历史列表 

-w: 保存历史列表到指定的历史文件 

-n: 读历史文件中未读过的行到历史列表 

-p: 展开历史参数成多行,但不存在历史列表中 

-s: 展开历史参数成一行,附加在历史列表后 </code></pre><h4 id="命令历史相关环境变量"><a href="#命令历史相关环境变量" class="headerlink" title="命令历史相关环境变量"></a>命令历史相关环境变量</h4><p>HISTSIZE:命令历史记录的条数 </p>
<p>HISTFILE:指定历史文件,默认为~/.bash_history </p>
<p>HISTFILESIZE:命令历史文件记录历史的条数 </p>
<p>HISTTIMEFORMAT=”%F %T “ 显示时间 </p>
<p>HISTIGNORE=”str1:str2*:… “ 忽略str1命令,str2开头的历史 </p>
<p>控制命令历史的记录方式: </p>
<pre><code>环境变量:HISTCONTROL 

ignoredups 默认,忽略重复的命令,连续且相同为&quot;重复&quot; 

ignorespace 忽略所有以空白开头的命令 

ignoreboth 相当于ignoredups, ignorespace的组合 

erasedups 删除重复命令 </code></pre><p>export 变量名=”值” </p>
<p>存放在 /etc/profile 或 ~/.bash_profile </p>
<hr>
<h3 id="bash的快捷键"><a href="#bash的快捷键" class="headerlink" title="bash的快捷键"></a>bash的快捷键</h3><p>Ctrl + l 清屏,相当于clear命令 </p>
<p>Ctrl + o 执行当前命令,并重新显示本命令 </p>
<p>Ctrl + s 阻止屏幕输出,锁定 </p>
<p>Ctrl + q 允许屏幕输出 </p>
<p>Ctrl + c 终止命令 </p>
<p>Ctrl + z 挂起命令 </p>
<p>Ctrl + a 光标移到命令行首,相当于Home </p>
<p>Ctrl + e 光标移到命令行尾,相当于End </p>
<p>Ctrl + f 光标向右移动一个字符 </p>
<p>Ctrl + b 光标向左移动一个字符 </p>
<p>Alt + f 光标向右移动一个单词尾 </p>
<p>Alt + b 光标向左移动一个单词首 </p>
<p>Ctrl + xx 光标在命令行首和光标之间移动 </p>
<p>Ctrl + u 从光标处删除至命令行首 </p>
<p>Ctrl + k 从光标处删除至命令行尾 </p>
<p>Alt + r 删除当前整行 </p>
<p>Ctrl + w 从光标处向左删除至单词首 </p>
<p>Alt + d 从光标处向右删除至单词尾 </p>
<p>Ctrl + d 删除光标处的一个字符 </p>
<p>Ctrl + h 删除光标前的一个字符 </p>
<p>Ctrl + y 将删除的字符粘贴至光标后 </p>
<p>Alt + c 从光标处开始向右更改为首字母大写的单词 </p>
<p>Alt + u 从光标处开始,将右边一个单词更改为大写 </p>
<p>Alt + l 从光标处开始,将右边一个单词更改为小写 </p>
<p>Ctrl + t 交换光标处和之前的字符位置 </p>
<p>Alt + t 交换光标处和之前的单词位置 </p>
<p>Alt + N 提示输入指定字符后,重复显示该字符N次 </p>
<p>注意:Alt组合快捷键经常和其它软件冲突 </p>
<hr>
<h3 id="获得帮助"><a href="#获得帮助" class="headerlink" title="获得帮助"></a>获得帮助</h3><p>多层次的帮助 </p>
<p>whatis </p>
<p>command –help </p>
<p>man and info </p>
<p>/usr/share/doc/ </p>
<p>Red Hat documentation </p>
<p>其它网站和搜索 </p>
<h4 id="whatis"><a href="#whatis" class="headerlink" title="whatis"></a>whatis</h4><p>显示命令的简短描述 </p>
<p>使用数据库 </p>
<p>刚安装后不可立即使用 </p>
<p>makewhatis | mandb制作数据库 </p>
<p>使用示例: </p>
<pre><code>whatis cal 或 man –f cal </code></pre><h4 id="命令帮助"><a href="#命令帮助" class="headerlink" title="命令帮助"></a>命令帮助</h4><p>内部命令:help COMMAND </p>
<pre><code>man bash </code></pre><p>外部命令:</p>
<pre><code>(1) COMMAND --help 

    COMMAND -h 

(2) 使用手册(manual) 

    man COMMAND 

(3) 信息页 

    info COMMAND 

(4) 程序自身的帮助文档 

    README 

    INSTALL 

    ChangeLog 

(5) 程序官方文档 

    官方站点:Documentation 

(6) 发行版的官方文档 

(7) Google </code></pre><h4 id="help和-h选项"><a href="#help和-h选项" class="headerlink" title="-help和-h选项"></a>-help和-h选项</h4><p>显示用法总结和参数列表 </p>
<p>使用的大多数,但并非所有的 </p>
<p>示例: </p>
<pre><code>date --help 

Usage: date [OPTION]... [+FORMAT] or: date \[-u|--utc|-- universal]\[MMDDhhmm\[\[CC]YY]\[.ss]]

[] 表示可选项 

CAPS或 &lt;&gt; 表示变化的数据 

... 表示一个列表 

x |y| z 的意思是&quot; x 或 y 或 z &quot; 

-abc的 意思是-a -b –c 

{ } 表示分组 </code></pre><h4 id="man命令"><a href="#man命令" class="headerlink" title="man命令"></a>man命令</h4><p>提供命令帮助的文件 </p>
<p>手册页存放在/usr/share/man </p>
<p>几乎每个命令都有man的”页面” </p>
<p>man页面分组为不同的”章节” </p>
<p>统称为Linux手册 </p>
<p>man命令的配置文件:/etc/man.config | man_db.conf MANPATH /PATH/TO/SOMEWHERE: 指明man文件搜索位置 </p>
<p>man -M /PATH/TO/SOMEWHERE COMMAND: 到指定位置下搜索 COMMAND命令的手册页并显示 </p>
<p>中文man需安装包man-pages-zh-CN </p>
<h4 id="man章节"><a href="#man章节" class="headerlink" title="man章节"></a>man章节</h4><p>1: 用户命令 </p>
<p>2: 系统调用 </p>
<p>3: C库调用 </p>
<p>4: 设备文件及特殊文件 </p>
<p>5: 配置文件格式 </p>
<p>6: 游戏 </p>
<p>7: 杂项 </p>
<p>8: 管理类的命令 </p>
<p>9:Linux 内核API</p>
<h4 id="man帮助段落说明"><a href="#man帮助段落说明" class="headerlink" title="man帮助段落说明"></a>man帮助段落说明</h4><p>帮助手册中的段落说明: </p>
<pre><code>NAME 名称及简要说明 

SYNOPSIS 用法格式说明 

   • [] 可选内容 

   • &lt;&gt; 必选内容 

   • a|b 二选一 

   • { } 分组 

   • ... 同一内容可出现多次 

DESCRIPTION 详细说明 

OPTIONS 选项说明 

EXAMPLES 示例 

FILES 相关文件 

AUTHOR 作者 

COPYRIGHT 版本信息 

REPORTING BUGS bug信息 

SEE ALSO 其它帮助参考 </code></pre><h4 id="man帮助"><a href="#man帮助" class="headerlink" title="man帮助"></a>man帮助</h4><p>查看man手册页 </p>
<pre><code>man [章节] keyword </code></pre><p>列出所有帮助 </p>
<pre><code>man –a keyword </code></pre><p>搜索man手册 </p>
<pre><code>man -k keyword 列出所有匹配的页面 

使用 whatis 数据库 </code></pre><p>相当于whatis </p>
<pre><code>man –f keyword </code></pre><p>打印man帮助文件的路径 </p>
<pre><code>man –w [章节] keyword </code></pre><h4 id="man命令-1"><a href="#man命令-1" class="headerlink" title="man命令"></a>man命令</h4><p>man命令的操作方法:使用less命令实现 </p>
<pre><code>space, ^v, ^f, ^F: 向文件尾翻屏 

b, ^b: 向文件首部翻屏 

d, ^d: 向文件尾部翻半屏 

u, ^u: 向文件首部翻半屏 

RETURN, ^N, e, ^E or j or ^J: 向文件尾部翻一行 

y or ^Y or ^P or k or ^K:向文件首部翻一行 

q: 退出 

#:跳转至第#行 

1G: 回到文件首部 

G:翻至文件尾部 </code></pre><h4 id="man搜索"><a href="#man搜索" class="headerlink" title="man搜索"></a>man搜索</h4><p>/KEYWORD: </p>
<pre><code>以KEYWORD指定的字符串为关键字,从当前位置向文件尾部搜索；不区 分字符大小写； 

n: 下一个 

N:上一个 </code></pre><p>?KEYWORD: 以KEYWORD指定的字符串为关键字,从当前位置向文件首部搜索；不区分字 符大小写； </p>
<pre><code>n: 跟搜索命令同方向,下一个 

N:跟搜索命令反方向,上一个 </code></pre><h4 id="info"><a href="#info" class="headerlink" title="info"></a>info</h4><p>man常用于命令参考 ,GNU工具info适合通用文档参考 </p>
<p>没有参数,列出所有的页面 </p>
<p>info 页面的结构就像一个网站 </p>
<p>每一页分为”节点” </p>
<p>链接节点之前 * </p>
<p>info [ 命令 ] </p>
<h4 id="导航info页"><a href="#导航info页" class="headerlink" title="导航info页"></a>导航info页</h4><p>方向键,PgUp,PgDn 导航 </p>
<p>Tab键 移动到下一个链接 </p>
<p>d 显示主题目录 </p>
<p>Home 显示主题首部 </p>
<p>Enter进入 选定链接 </p>
<p>n/p/u/l 进入下/前/上一层/最后一个链接 </p>
<p>s 文字 文本搜索 </p>
<p>q 退出 info </p>
<h4 id="通过本地文档获取帮助"><a href="#通过本地文档获取帮助" class="headerlink" title="通过本地文档获取帮助"></a>通过本地文档获取帮助</h4><p>System-&gt;help(centos6) </p>
<p>Applications -&gt; documentation-&gt;help(centos7) </p>
<p>提供的官方使用指南和发行注记 </p>
<p>/usr/share/doc目录 </p>
<p>多数安装了的软件包的子目录,包括了这些软件的相关 原理说明 </p>
<p>常见文档:README INSTALL CHANGES </p>
<p>不适合其它地方的文档的位置 </p>
<p>配置文件范例 </p>
<p>HTML/PDF/PS 格式的文档 </p>
<p>授权书详情 </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Mark"
      src="/images/mark_avatar.png">
  <p class="site-author-name" itemprop="name">Mark</p>
  <div class="site-description" itemprop="description">半吊子民工 英特纳雄耐尔就一定要实现</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">60</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:markupzh@gmail.com" title="E-Mail → mailto:markupzh@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2015 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mark</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
